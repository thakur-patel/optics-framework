<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="A powerful, extensible no-code test automation framework designed for vision-powered, data-driven testing and production app synthetic monitoring."><meta name=author content="Dhruv Menon"><link href=https://mozarkai.github.io/optics-framework/architecture/strategies/ rel=canonical><link href=../engines/ rel=prev><link href=../execution/ rel=next><link rel=icon href=../../assets/mozark_new_logo.svg><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.7.3"><title>Strategies - Optics Framework</title><link rel=stylesheet href=../../assets/stylesheets/main.484c7ddc.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.ab4e12ef.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Inter:300,300i,400,400i,700,700i%7CJetBrains+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Inter";--md-code-font:"JetBrains Mono"}</style><link rel=stylesheet href=../../assets/_mkdocstrings.css><link rel=stylesheet href=../../stylesheets/extra.css><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=purple> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#strategy-pattern-and-self-healing class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class="md-header md-header--shadow md-header--lifted" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../.. title="Optics Framework" class="md-header__button md-logo" aria-label="Optics Framework" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m13.13 22.19-1.63-3.83c1.57-.58 3.04-1.36 4.4-2.27zM5.64 12.5l-3.83-1.63 6.1-2.77C7 9.46 6.22 10.93 5.64 12.5M21.61 2.39S16.66.269 11 5.93c-2.19 2.19-3.5 4.6-4.35 6.71-.28.75-.09 1.57.46 2.13l2.13 2.12c.55.56 1.37.74 2.12.46A19.1 19.1 0 0 0 18.07 13c5.66-5.66 3.54-10.61 3.54-10.61m-7.07 7.07c-.78-.78-.78-2.05 0-2.83s2.05-.78 2.83 0c.77.78.78 2.05 0 2.83s-2.05.78-2.83 0m-5.66 7.07-1.41-1.41zM6.24 22l3.64-3.64c-.34-.09-.67-.24-.97-.45L4.83 22zM2 22h1.41l4.77-4.76-1.42-1.41L2 20.59zm0-2.83 4.09-4.08c-.21-.3-.36-.62-.45-.97L2 17.76z"/></svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Optics Framework </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Strategies </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=purple aria-label="Switch to dark mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg> </label> <input class=md-option data-md-color-media data-md-color-scheme=slate data-md-color-primary=indigo data-md-color-accent=purple aria-label="Switch to light mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg> </label> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Search> <a href=javascript:void(0) class="md-search__icon md-icon" title=Share aria-label=Share data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg> </a> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/mozarkai/optics-framework title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </div> <div class=md-source__repository> mozarkai/optics-framework </div> </a> </div> </nav> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../.. class=md-tabs__link> Home </a> </li> <li class=md-tabs__item> <a href=../../introduction/ class=md-tabs__link> Introduction </a> </li> <li class=md-tabs__item> <a href=../../quickstart/ class=md-tabs__link> Quick Start </a> </li> <li class=md-tabs__item> <a href=../../configuration/ class=md-tabs__link> Configuration </a> </li> <li class=md-tabs__item> <a href=../../user_workflow/ class=md-tabs__link> User Workflow </a> </li> <li class=md-tabs__item> <a href=../../usage/usage/ class=md-tabs__link> Usage </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=../ class=md-tabs__link> Architecture </a> </li> <li class=md-tabs__item> <a href=../../api_reference/ class=md-tabs__link> API Reference </a> </li> <li class=md-tabs__item> <a href=../../contribution/contributing_guidelines/ class=md-tabs__link> Contribution </a> </li> </ul> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../.. title="Optics Framework" class="md-nav__button md-logo" aria-label="Optics Framework" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m13.13 22.19-1.63-3.83c1.57-.58 3.04-1.36 4.4-2.27zM5.64 12.5l-3.83-1.63 6.1-2.77C7 9.46 6.22 10.93 5.64 12.5M21.61 2.39S16.66.269 11 5.93c-2.19 2.19-3.5 4.6-4.35 6.71-.28.75-.09 1.57.46 2.13l2.13 2.12c.55.56 1.37.74 2.12.46A19.1 19.1 0 0 0 18.07 13c5.66-5.66 3.54-10.61 3.54-10.61m-7.07 7.07c-.78-.78-.78-2.05 0-2.83s2.05-.78 2.83 0c.77.78.78 2.05 0 2.83s-2.05.78-2.83 0m-5.66 7.07-1.41-1.41zM6.24 22l3.64-3.64c-.34-.09-.67-.24-.97-.45L4.83 22zM2 22h1.41l4.77-4.76-1.42-1.41L2 20.59zm0-2.83 4.09-4.08c-.21-.3-.36-.62-.45-.97L2 17.76z"/></svg> </a> Optics Framework </label> <div class=md-nav__source> <a href=https://github.com/mozarkai/optics-framework title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </div> <div class=md-source__repository> mozarkai/optics-framework </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../.. class=md-nav__link> <span class=md-ellipsis> Home </span> </a> </li> <li class=md-nav__item> <a href=../../introduction/ class=md-nav__link> <span class=md-ellipsis> Introduction </span> </a> </li> <li class=md-nav__item> <a href=../../quickstart/ class=md-nav__link> <span class=md-ellipsis> Quick Start </span> </a> </li> <li class=md-nav__item> <a href=../../configuration/ class=md-nav__link> <span class=md-ellipsis> Configuration </span> </a> </li> <li class=md-nav__item> <a href=../../user_workflow/ class=md-nav__link> <span class=md-ellipsis> User Workflow </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_6> <label class=md-nav__link for=__nav_6 id=__nav_6_label tabindex=0> <span class=md-ellipsis> Usage </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_6_label aria-expanded=false> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> Usage </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../usage/usage/ class=md-nav__link> <span class=md-ellipsis> Usage Overview </span> </a> </li> <li class=md-nav__item> <a href=../../usage/CLI_usage/ class=md-nav__link> <span class=md-ellipsis> CLI Usage </span> </a> </li> <li class=md-nav__item> <a href=../../usage/keyword_usage/ class=md-nav__link> <span class=md-ellipsis> Keyword Usage </span> </a> </li> <li class=md-nav__item> <a href=../../usage/library_usage/ class=md-nav__link> <span class=md-ellipsis> Library Usage </span> </a> </li> <li class=md-nav__item> <a href=../../usage/robot_usage/ class=md-nav__link> <span class=md-ellipsis> Robot Framework Usage </span> </a> </li> <li class=md-nav__item> <a href=../../usage/REST_API_usage/ class=md-nav__link> <span class=md-ellipsis> REST API Usage </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_7 checked> <label class=md-nav__link for=__nav_7 id=__nav_7_label tabindex> <span class=md-ellipsis> Architecture </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_7_label aria-expanded=true> <label class=md-nav__title for=__nav_7> <span class="md-nav__icon md-icon"></span> Architecture </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../ class=md-nav__link> <span class=md-ellipsis> Architecture Overview </span> </a> </li> <li class=md-nav__item> <a href=../components/ class=md-nav__link> <span class=md-ellipsis> Components </span> </a> </li> <li class=md-nav__item> <a href=../engines/ class=md-nav__link> <span class=md-ellipsis> Engines </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> Strategies </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> Strategies </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#overview class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class=md-nav__item> <a href=#strategy-architecture class=md-nav__link> <span class=md-ellipsis> Strategy Architecture </span> </a> </li> <li class=md-nav__item> <a href=#strategymanager class=md-nav__link> <span class=md-ellipsis> StrategyManager </span> </a> <nav class=md-nav aria-label=StrategyManager> <ul class=md-nav__list> <li class=md-nav__item> <a href=#key-responsibilities class=md-nav__link> <span class=md-ellipsis> Key Responsibilities </span> </a> </li> <li class=md-nav__item> <a href=#initialization class=md-nav__link> <span class=md-ellipsis> Initialization </span> </a> </li> <li class=md-nav__item> <a href=#strategy-building class=md-nav__link> <span class=md-ellipsis> Strategy Building </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#locator-strategies class=md-nav__link> <span class=md-ellipsis> Locator Strategies </span> </a> <nav class=md-nav aria-label="Locator Strategies"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#xpathstrategy class=md-nav__link> <span class=md-ellipsis> XPathStrategy </span> </a> </li> <li class=md-nav__item> <a href=#textelementstrategy class=md-nav__link> <span class=md-ellipsis> TextElementStrategy </span> </a> </li> <li class=md-nav__item> <a href=#textdetectionstrategy class=md-nav__link> <span class=md-ellipsis> TextDetectionStrategy </span> </a> </li> <li class=md-nav__item> <a href=#imagedetectionstrategy class=md-nav__link> <span class=md-ellipsis> ImageDetectionStrategy </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#strategy-selection class=md-nav__link> <span class=md-ellipsis> Strategy Selection </span> </a> <nav class=md-nav aria-label="Strategy Selection"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#automatic-selection class=md-nav__link> <span class=md-ellipsis> Automatic Selection </span> </a> </li> <li class=md-nav__item> <a href=#strategy-factory class=md-nav__link> <span class=md-ellipsis> Strategy Factory </span> </a> </li> <li class=md-nav__item> <a href=#strategy-creation class=md-nav__link> <span class=md-ellipsis> Strategy Creation </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#fallback-mechanism class=md-nav__link> <span class=md-ellipsis> Fallback Mechanism </span> </a> <nav class=md-nav aria-label="Fallback Mechanism"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#multi-level-fallback class=md-nav__link> <span class=md-ellipsis> Multi-Level Fallback </span> </a> </li> <li class=md-nav__item> <a href=#strategy-fallback-flow class=md-nav__link> <span class=md-ellipsis> Strategy Fallback Flow </span> </a> </li> <li class=md-nav__item> <a href=#element-source-fallback class=md-nav__link> <span class=md-ellipsis> Element Source Fallback </span> </a> </li> <li class=md-nav__item> <a href=#vision-model-fallback class=md-nav__link> <span class=md-ellipsis> Vision Model Fallback </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#self-healing-decorator class=md-nav__link> <span class=md-ellipsis> Self-Healing Decorator </span> </a> <nav class=md-nav aria-label="Self-Healing Decorator"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#decorator-flow class=md-nav__link> <span class=md-ellipsis> Decorator Flow </span> </a> </li> <li class=md-nav__item> <a href=#implementation-details class=md-nav__link> <span class=md-ellipsis> Implementation Details </span> </a> </li> <li class=md-nav__item> <a href=#key-features class=md-nav__link> <span class=md-ellipsis> Key Features </span> </a> </li> <li class=md-nav__item> <a href=#usage-example class=md-nav__link> <span class=md-ellipsis> Usage Example </span> </a> </li> <li class=md-nav__item> <a href=#error-scenarios class=md-nav__link> <span class=md-ellipsis> Error Scenarios </span> </a> </li> <li class=md-nav__item> <a href=#debugging-support class=md-nav__link> <span class=md-ellipsis> Debugging Support </span> </a> </li> <li class=md-nav__item> <a href=#best-practices class=md-nav__link> <span class=md-ellipsis> Best Practices </span> </a> </li> <li class=md-nav__item> <a href=#integration-points class=md-nav__link> <span class=md-ellipsis> Integration Points </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#screenshot-strategies class=md-nav__link> <span class=md-ellipsis> Screenshot Strategies </span> </a> <nav class=md-nav aria-label="Screenshot Strategies"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#screenshotstrategy class=md-nav__link> <span class=md-ellipsis> ScreenshotStrategy </span> </a> </li> <li class=md-nav__item> <a href=#screenshot-streaming class=md-nav__link> <span class=md-ellipsis> Screenshot Streaming </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#page-source-strategies class=md-nav__link> <span class=md-ellipsis> Page Source Strategies </span> </a> <nav class=md-nav aria-label="Page Source Strategies"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#pagesourcestrategy class=md-nav__link> <span class=md-ellipsis> PagesourceStrategy </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#strategy-result-handling class=md-nav__link> <span class=md-ellipsis> Strategy Result Handling </span> </a> <nav class=md-nav aria-label="Strategy Result Handling"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#locateresult class=md-nav__link> <span class=md-ellipsis> LocateResult </span> </a> </li> <li class=md-nav__item> <a href=#result-types class=md-nav__link> <span class=md-ellipsis> Result Types </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#best-practices_1 class=md-nav__link> <span class=md-ellipsis> Best Practices </span> </a> <nav class=md-nav aria-label="Best Practices"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#strategy-selection_1 class=md-nav__link> <span class=md-ellipsis> Strategy Selection </span> </a> </li> <li class=md-nav__item> <a href=#performance-optimization class=md-nav__link> <span class=md-ellipsis> Performance Optimization </span> </a> </li> <li class=md-nav__item> <a href=#error-handling class=md-nav__link> <span class=md-ellipsis> Error Handling </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#extension-guide class=md-nav__link> <span class=md-ellipsis> Extension Guide </span> </a> <nav class=md-nav aria-label="Extension Guide"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#adding-a-new-strategy class=md-nav__link> <span class=md-ellipsis> Adding a New Strategy </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#debugging-strategies class=md-nav__link> <span class=md-ellipsis> Debugging Strategies </span> </a> <nav class=md-nav aria-label="Debugging Strategies"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#enable-debug-logging class=md-nav__link> <span class=md-ellipsis> Enable Debug Logging </span> </a> </li> <li class=md-nav__item> <a href=#strategy-execution-log class=md-nav__link> <span class=md-ellipsis> Strategy Execution Log </span> </a> </li> <li class=md-nav__item> <a href=#visual-debugging class=md-nav__link> <span class=md-ellipsis> Visual Debugging </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#related-documentation class=md-nav__link> <span class=md-ellipsis> Related Documentation </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../execution/ class=md-nav__link> <span class=md-ellipsis> Execution </span> </a> </li> <li class=md-nav__item> <a href=../event_system/ class=md-nav__link> <span class=md-ellipsis> Event System </span> </a> </li> <li class=md-nav__item> <a href=../error_handling/ class=md-nav__link> <span class=md-ellipsis> Error Handling </span> </a> </li> <li class=md-nav__item> <a href=../api_layer/ class=md-nav__link> <span class=md-ellipsis> REST API Layer </span> </a> </li> <li class=md-nav__item> <a href=../cli_layer/ class=md-nav__link> <span class=md-ellipsis> CLI Layer </span> </a> </li> <li class=md-nav__item> <a href=../library_layer/ class=md-nav__link> <span class=md-ellipsis> Library Layer </span> </a> </li> <li class=md-nav__item> <a href=../logging/ class=md-nav__link> <span class=md-ellipsis> Logging </span> </a> </li> <li class=md-nav__item> <a href=../decisions/ class=md-nav__link> <span class=md-ellipsis> Architecture Decisions </span> </a> </li> <li class=md-nav__item> <a href=../extending/ class=md-nav__link> <span class=md-ellipsis> Extending </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_8> <label class=md-nav__link for=__nav_8 id=__nav_8_label tabindex=0> <span class=md-ellipsis> API Reference </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_8_label aria-expanded=false> <label class=md-nav__title for=__nav_8> <span class="md-nav__icon md-icon"></span> API Reference </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../api_reference/ class=md-nav__link> <span class=md-ellipsis> API Reference Overview </span> </a> </li> <li class=md-nav__item> <a href=../../api_reference/optics/ class=md-nav__link> <span class=md-ellipsis> Optics Class </span> </a> </li> <li class=md-nav__item> <a href=../../api_reference/action_keywords/ class=md-nav__link> <span class=md-ellipsis> Action Keywords </span> </a> </li> <li class=md-nav__item> <a href=../../api_reference/app_management/ class=md-nav__link> <span class=md-ellipsis> App Management </span> </a> </li> <li class=md-nav__item> <a href=../../api_reference/verification/ class=md-nav__link> <span class=md-ellipsis> Verification </span> </a> </li> <li class=md-nav__item> <a href=../../api_reference/flow_control/ class=md-nav__link> <span class=md-ellipsis> Flow Control </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_9> <label class=md-nav__link for=__nav_9 id=__nav_9_label tabindex=0> <span class=md-ellipsis> Contribution </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_9_label aria-expanded=false> <label class=md-nav__title for=__nav_9> <span class="md-nav__icon md-icon"></span> Contribution </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../contribution/contributing_guidelines/ class=md-nav__link> <span class=md-ellipsis> Contributing Guidelines </span> </a> </li> <li class=md-nav__item> <a href=../../contribution/developer_guide/ class=md-nav__link> <span class=md-ellipsis> Developer Guide </span> </a> </li> <li class=md-nav__item> <a href=../../contribution/help_wanted/ class=md-nav__link> <span class=md-ellipsis> Help Wanted </span> </a> </li> <li class=md-nav__item> <a href=../../contribution/code_of_conduct/ class=md-nav__link> <span class=md-ellipsis> Code of Conduct </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#overview class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class=md-nav__item> <a href=#strategy-architecture class=md-nav__link> <span class=md-ellipsis> Strategy Architecture </span> </a> </li> <li class=md-nav__item> <a href=#strategymanager class=md-nav__link> <span class=md-ellipsis> StrategyManager </span> </a> <nav class=md-nav aria-label=StrategyManager> <ul class=md-nav__list> <li class=md-nav__item> <a href=#key-responsibilities class=md-nav__link> <span class=md-ellipsis> Key Responsibilities </span> </a> </li> <li class=md-nav__item> <a href=#initialization class=md-nav__link> <span class=md-ellipsis> Initialization </span> </a> </li> <li class=md-nav__item> <a href=#strategy-building class=md-nav__link> <span class=md-ellipsis> Strategy Building </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#locator-strategies class=md-nav__link> <span class=md-ellipsis> Locator Strategies </span> </a> <nav class=md-nav aria-label="Locator Strategies"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#xpathstrategy class=md-nav__link> <span class=md-ellipsis> XPathStrategy </span> </a> </li> <li class=md-nav__item> <a href=#textelementstrategy class=md-nav__link> <span class=md-ellipsis> TextElementStrategy </span> </a> </li> <li class=md-nav__item> <a href=#textdetectionstrategy class=md-nav__link> <span class=md-ellipsis> TextDetectionStrategy </span> </a> </li> <li class=md-nav__item> <a href=#imagedetectionstrategy class=md-nav__link> <span class=md-ellipsis> ImageDetectionStrategy </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#strategy-selection class=md-nav__link> <span class=md-ellipsis> Strategy Selection </span> </a> <nav class=md-nav aria-label="Strategy Selection"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#automatic-selection class=md-nav__link> <span class=md-ellipsis> Automatic Selection </span> </a> </li> <li class=md-nav__item> <a href=#strategy-factory class=md-nav__link> <span class=md-ellipsis> Strategy Factory </span> </a> </li> <li class=md-nav__item> <a href=#strategy-creation class=md-nav__link> <span class=md-ellipsis> Strategy Creation </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#fallback-mechanism class=md-nav__link> <span class=md-ellipsis> Fallback Mechanism </span> </a> <nav class=md-nav aria-label="Fallback Mechanism"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#multi-level-fallback class=md-nav__link> <span class=md-ellipsis> Multi-Level Fallback </span> </a> </li> <li class=md-nav__item> <a href=#strategy-fallback-flow class=md-nav__link> <span class=md-ellipsis> Strategy Fallback Flow </span> </a> </li> <li class=md-nav__item> <a href=#element-source-fallback class=md-nav__link> <span class=md-ellipsis> Element Source Fallback </span> </a> </li> <li class=md-nav__item> <a href=#vision-model-fallback class=md-nav__link> <span class=md-ellipsis> Vision Model Fallback </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#self-healing-decorator class=md-nav__link> <span class=md-ellipsis> Self-Healing Decorator </span> </a> <nav class=md-nav aria-label="Self-Healing Decorator"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#decorator-flow class=md-nav__link> <span class=md-ellipsis> Decorator Flow </span> </a> </li> <li class=md-nav__item> <a href=#implementation-details class=md-nav__link> <span class=md-ellipsis> Implementation Details </span> </a> </li> <li class=md-nav__item> <a href=#key-features class=md-nav__link> <span class=md-ellipsis> Key Features </span> </a> </li> <li class=md-nav__item> <a href=#usage-example class=md-nav__link> <span class=md-ellipsis> Usage Example </span> </a> </li> <li class=md-nav__item> <a href=#error-scenarios class=md-nav__link> <span class=md-ellipsis> Error Scenarios </span> </a> </li> <li class=md-nav__item> <a href=#debugging-support class=md-nav__link> <span class=md-ellipsis> Debugging Support </span> </a> </li> <li class=md-nav__item> <a href=#best-practices class=md-nav__link> <span class=md-ellipsis> Best Practices </span> </a> </li> <li class=md-nav__item> <a href=#integration-points class=md-nav__link> <span class=md-ellipsis> Integration Points </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#screenshot-strategies class=md-nav__link> <span class=md-ellipsis> Screenshot Strategies </span> </a> <nav class=md-nav aria-label="Screenshot Strategies"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#screenshotstrategy class=md-nav__link> <span class=md-ellipsis> ScreenshotStrategy </span> </a> </li> <li class=md-nav__item> <a href=#screenshot-streaming class=md-nav__link> <span class=md-ellipsis> Screenshot Streaming </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#page-source-strategies class=md-nav__link> <span class=md-ellipsis> Page Source Strategies </span> </a> <nav class=md-nav aria-label="Page Source Strategies"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#pagesourcestrategy class=md-nav__link> <span class=md-ellipsis> PagesourceStrategy </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#strategy-result-handling class=md-nav__link> <span class=md-ellipsis> Strategy Result Handling </span> </a> <nav class=md-nav aria-label="Strategy Result Handling"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#locateresult class=md-nav__link> <span class=md-ellipsis> LocateResult </span> </a> </li> <li class=md-nav__item> <a href=#result-types class=md-nav__link> <span class=md-ellipsis> Result Types </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#best-practices_1 class=md-nav__link> <span class=md-ellipsis> Best Practices </span> </a> <nav class=md-nav aria-label="Best Practices"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#strategy-selection_1 class=md-nav__link> <span class=md-ellipsis> Strategy Selection </span> </a> </li> <li class=md-nav__item> <a href=#performance-optimization class=md-nav__link> <span class=md-ellipsis> Performance Optimization </span> </a> </li> <li class=md-nav__item> <a href=#error-handling class=md-nav__link> <span class=md-ellipsis> Error Handling </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#extension-guide class=md-nav__link> <span class=md-ellipsis> Extension Guide </span> </a> <nav class=md-nav aria-label="Extension Guide"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#adding-a-new-strategy class=md-nav__link> <span class=md-ellipsis> Adding a New Strategy </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#debugging-strategies class=md-nav__link> <span class=md-ellipsis> Debugging Strategies </span> </a> <nav class=md-nav aria-label="Debugging Strategies"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#enable-debug-logging class=md-nav__link> <span class=md-ellipsis> Enable Debug Logging </span> </a> </li> <li class=md-nav__item> <a href=#strategy-execution-log class=md-nav__link> <span class=md-ellipsis> Strategy Execution Log </span> </a> </li> <li class=md-nav__item> <a href=#visual-debugging class=md-nav__link> <span class=md-ellipsis> Visual Debugging </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#related-documentation class=md-nav__link> <span class=md-ellipsis> Related Documentation </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=strategy-pattern-and-self-healing>Strategy Pattern and Self-Healing<a class=headerlink href=#strategy-pattern-and-self-healing title="Permanent link">&para;</a></h1> <p>The Optics Framework uses the Strategy pattern extensively to provide self-healing test automation. This document explains how strategies work, how they're selected, and how the fallback mechanism ensures test resilience.</p> <h2 id=overview>Overview<a class=headerlink href=#overview title="Permanent link">&para;</a></h2> <p>The strategy pattern allows the framework to try multiple methods for locating elements, with automatic fallback when one method fails. This creates a self-healing system that adapts to UI changes and different application states.</p> <h2 id=strategy-architecture>Strategy Architecture<a class=headerlink href=#strategy-architecture title="Permanent link">&para;</a></h2> <pre class=mermaid><code>graph TB
    A[ActionKeyword] --&gt; B[StrategyManager]
    B --&gt; C[StrategyFactory]
    C --&gt; D[XPathStrategy]
    C --&gt; E[TextElementStrategy]
    C --&gt; F[TextDetectionStrategy]
    C --&gt; G[ImageDetectionStrategy]
    D --&gt; H[ElementSource]
    E --&gt; H
    F --&gt; I[TextDetection]
    F --&gt; H
    G --&gt; J[ImageDetection]
    G --&gt; H
    B --&gt; K[Fallback Chain]
    K --&gt; L[Try Next Strategy]</code></pre> <h2 id=strategymanager>StrategyManager<a class=headerlink href=#strategymanager title="Permanent link">&para;</a></h2> <p><strong>Location:</strong> <code>optics_framework/common/strategies.py</code></p> <p>The <code>StrategyManager</code> orchestrates multiple location strategies and manages fallback chains.</p> <h3 id=key-responsibilities>Key Responsibilities<a class=headerlink href=#key-responsibilities title="Permanent link">&para;</a></h3> <ul> <li>Strategy creation and management</li> <li>Strategy execution with fallback</li> <li>Screenshot and page source strategy management</li> <li>Element location coordination</li> </ul> <h3 id=initialization>Initialization<a class=headerlink href=#initialization title="Permanent link">&para;</a></h3> <div class="language-python highlight"><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>strategy_manager</span> <span class=o>=</span> <span class=n>StrategyManager</span><span class=p>(</span>
</span><span id=__span-0-2><a id=__codelineno-0-2 name=__codelineno-0-2 href=#__codelineno-0-2></a>    <span class=n>element_source</span><span class=o>=</span><span class=n>element_source_fallback</span><span class=p>,</span>
</span><span id=__span-0-3><a id=__codelineno-0-3 name=__codelineno-0-3 href=#__codelineno-0-3></a>    <span class=n>text_detection</span><span class=o>=</span><span class=n>text_detection_fallback</span><span class=p>,</span>
</span><span id=__span-0-4><a id=__codelineno-0-4 name=__codelineno-0-4 href=#__codelineno-0-4></a>    <span class=n>image_detection</span><span class=o>=</span><span class=n>image_detection_fallback</span>
</span><span id=__span-0-5><a id=__codelineno-0-5 name=__codelineno-0-5 href=#__codelineno-0-5></a><span class=p>)</span>
</span></code></pre></div> <h3 id=strategy-building>Strategy Building<a class=headerlink href=#strategy-building title="Permanent link">&para;</a></h3> <p>The manager builds three types of strategies:</p> <ol> <li><strong>Locator Strategies</strong>: For element location</li> <li><strong>Screenshot Strategies</strong>: For screen capture</li> <li><strong>Page Source Strategies</strong>: For page source extraction</li> </ol> <h2 id=locator-strategies>Locator Strategies<a class=headerlink href=#locator-strategies title="Permanent link">&para;</a></h2> <h3 id=xpathstrategy>XPathStrategy<a class=headerlink href=#xpathstrategy title="Permanent link">&para;</a></h3> <p><strong>Priority:</strong> 1 (Highest)</p> <p>Locates elements using XPath expressions through the element source.</p> <h4 id=when-used>When Used<a class=headerlink href=#when-used title="Permanent link">&para;</a></h4> <ul> <li>Element type is "XPath"</li> <li>Element source supports <code>locate()</code> method</li> <li>Fastest method when available</li> </ul> <h4 id=implementation>Implementation<a class=headerlink href=#implementation title="Permanent link">&para;</a></h4> <div class="language-python highlight"><pre><span></span><code><span id=__span-1-1><a id=__codelineno-1-1 name=__codelineno-1-1 href=#__codelineno-1-1></a><span class=k>def</span><span class=w> </span><span class=nf>locate</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>element</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>index</span><span class=p>:</span> <span class=nb>int</span> <span class=o>=</span> <span class=mi>0</span><span class=p>):</span>
</span><span id=__span-1-2><a id=__codelineno-1-2 name=__codelineno-1-2 href=#__codelineno-1-2></a>    <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>element_source</span><span class=o>.</span><span class=n>locate</span><span class=p>(</span><span class=n>element</span><span class=p>,</span> <span class=n>index</span><span class=p>)</span>
</span></code></pre></div> <h4 id=examples>Examples<a class=headerlink href=#examples title="Permanent link">&para;</a></h4> <p><strong>Basic XPath:</strong> <div class="language-python highlight"><pre><span></span><code><span id=__span-2-1><a id=__codelineno-2-1 name=__codelineno-2-1 href=#__codelineno-2-1></a><span class=c1># Element: &quot;//button[@id=&#39;submit&#39;]&quot;</span>
</span><span id=__span-2-2><a id=__codelineno-2-2 name=__codelineno-2-2 href=#__codelineno-2-2></a><span class=c1># Strategy: XPathStrategy</span>
</span><span id=__span-2-3><a id=__codelineno-2-3 name=__codelineno-2-3 href=#__codelineno-2-3></a><span class=c1># Process: Direct element location via XPath</span>
</span><span id=__span-2-4><a id=__codelineno-2-4 name=__codelineno-2-4 href=#__codelineno-2-4></a><span class=c1># Result: Element object or coordinates</span>
</span><span id=__span-2-5><a id=__codelineno-2-5 name=__codelineno-2-5 href=#__codelineno-2-5></a><span class=n>press_element</span><span class=p>(</span><span class=s2>&quot;//button[@id=&#39;submit&#39;]&quot;</span><span class=p>)</span>
</span></code></pre></div></p> <p><strong>XPath with Attributes:</strong> <div class="language-python highlight"><pre><span></span><code><span id=__span-3-1><a id=__codelineno-3-1 name=__codelineno-3-1 href=#__codelineno-3-1></a><span class=c1># Complex XPath with multiple attributes</span>
</span><span id=__span-3-2><a id=__codelineno-3-2 name=__codelineno-3-2 href=#__codelineno-3-2></a><span class=n>press_element</span><span class=p>(</span><span class=s2>&quot;//android.widget.Button[@resource-id=&#39;com.app:id/button&#39; and @text=&#39;Submit&#39;]&quot;</span><span class=p>)</span>
</span></code></pre></div></p> <p><strong>XPath with Index:</strong> <div class="language-python highlight"><pre><span></span><code><span id=__span-4-1><a id=__codelineno-4-1 name=__codelineno-4-1 href=#__codelineno-4-1></a><span class=c1># Get second matching element</span>
</span><span id=__span-4-2><a id=__codelineno-4-2 name=__codelineno-4-2 href=#__codelineno-4-2></a><span class=n>press_element</span><span class=p>(</span><span class=s2>&quot;//button[@class=&#39;action&#39;]&quot;</span><span class=p>,</span> <span class=n>index</span><span class=o>=</span><span class=mi>1</span><span class=p>)</span>
</span></code></pre></div></p> <p><strong>XPath Performance:</strong> - Fastest strategy (typically &lt; 0.1s) - Direct DOM access - No screenshot required - No vision processing</p> <h3 id=textelementstrategy>TextElementStrategy<a class=headerlink href=#textelementstrategy title="Permanent link">&para;</a></h3> <p><strong>Priority:</strong> 2</p> <p>Locates elements by text content directly through the element source.</p> <h4 id=when-used_1>When Used<a class=headerlink href=#when-used_1 title="Permanent link">&para;</a></h4> <ul> <li>Element type is "Text" or "CSS"</li> <li>Element source supports direct text location</li> <li>Faster than OCR-based detection</li> </ul> <h4 id=implementation_1>Implementation<a class=headerlink href=#implementation_1 title="Permanent link">&para;</a></h4> <div class="language-python highlight"><pre><span></span><code><span id=__span-5-1><a id=__codelineno-5-1 name=__codelineno-5-1 href=#__codelineno-5-1></a><span class=k>def</span><span class=w> </span><span class=nf>locate</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>element</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>index</span><span class=p>:</span> <span class=nb>int</span> <span class=o>=</span> <span class=mi>0</span><span class=p>):</span>
</span><span id=__span-5-2><a id=__codelineno-5-2 name=__codelineno-5-2 href=#__codelineno-5-2></a>    <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>element_source</span><span class=o>.</span><span class=n>locate</span><span class=p>(</span><span class=n>element</span><span class=p>,</span> <span class=n>index</span><span class=p>)</span>
</span></code></pre></div> <h4 id=examples_1>Examples<a class=headerlink href=#examples_1 title="Permanent link">&para;</a></h4> <p><strong>Text-Based Location:</strong> <div class="language-python highlight"><pre><span></span><code><span id=__span-6-1><a id=__codelineno-6-1 name=__codelineno-6-1 href=#__codelineno-6-1></a><span class=c1># Element: &quot;Submit Button&quot;</span>
</span><span id=__span-6-2><a id=__codelineno-6-2 name=__codelineno-6-2 href=#__codelineno-6-2></a><span class=c1># Strategy: TextElementStrategy</span>
</span><span id=__span-6-3><a id=__codelineno-6-3 name=__codelineno-6-3 href=#__codelineno-6-3></a><span class=c1># Process: Direct text-based element location</span>
</span><span id=__span-6-4><a id=__codelineno-6-4 name=__codelineno-6-4 href=#__codelineno-6-4></a><span class=c1># Result: Element object</span>
</span><span id=__span-6-5><a id=__codelineno-6-5 name=__codelineno-6-5 href=#__codelineno-6-5></a><span class=n>press_element</span><span class=p>(</span><span class=s2>&quot;Submit Button&quot;</span><span class=p>)</span>
</span></code></pre></div></p> <p><strong>CSS Selector:</strong> <div class="language-python highlight"><pre><span></span><code><span id=__span-7-1><a id=__codelineno-7-1 name=__codelineno-7-1 href=#__codelineno-7-1></a><span class=c1># CSS selector (if supported by driver)</span>
</span><span id=__span-7-2><a id=__codelineno-7-2 name=__codelineno-7-2 href=#__codelineno-7-2></a><span class=n>press_element</span><span class=p>(</span><span class=s2>&quot;button.submit-btn&quot;</span><span class=p>)</span>
</span></code></pre></div></p> <p><strong>ID-Based:</strong> <div class="language-python highlight"><pre><span></span><code><span id=__span-8-1><a id=__codelineno-8-1 name=__codelineno-8-1 href=#__codelineno-8-1></a><span class=c1># Element ID</span>
</span><span id=__span-8-2><a id=__codelineno-8-2 name=__codelineno-8-2 href=#__codelineno-8-2></a><span class=n>press_element</span><span class=p>(</span><span class=s2>&quot;submit-button-id&quot;</span><span class=p>)</span>
</span></code></pre></div></p> <p><strong>Performance:</strong> - Fast strategy (typically &lt; 0.2s) - Direct element access - No screenshot required - Driver-specific implementation</p> <h3 id=textdetectionstrategy>TextDetectionStrategy<a class=headerlink href=#textdetectionstrategy title="Permanent link">&para;</a></h3> <p><strong>Priority:</strong> 3</p> <p>Locates text elements using OCR (Optical Character Recognition).</p> <h4 id=when-used_2>When Used<a class=headerlink href=#when-used_2 title="Permanent link">&para;</a></h4> <ul> <li>Element type is "Text"</li> <li>XPath and direct text location failed</li> <li>OCR model is available</li> <li>Element source supports screenshot capture</li> </ul> <h4 id=implementation-flow>Implementation Flow<a class=headerlink href=#implementation-flow title="Permanent link">&para;</a></h4> <pre class=mermaid><code>sequenceDiagram
    participant TS as TextDetectionStrategy
    participant ES as ElementSource
    participant OCR as TextDetection
    participant SM as StrategyManager

    TS-&gt;&gt;ES: capture()
    ES--&gt;&gt;TS: screenshot
    TS-&gt;&gt;OCR: detect_text(screenshot)
    OCR--&gt;&gt;TS: text locations
    TS-&gt;&gt;TS: find matching text
    TS--&gt;&gt;SM: coordinates</code></pre> <h4 id=features>Features<a class=headerlink href=#features title="Permanent link">&para;</a></h4> <ul> <li>Screenshot-based detection</li> <li>Full text detection with bounding boxes</li> <li>Confidence-based matching</li> <li>Timeout support for element appearance</li> </ul> <h4 id=examples_2>Examples<a class=headerlink href=#examples_2 title="Permanent link">&para;</a></h4> <p><strong>Basic Text Detection:</strong> <div class="language-python highlight"><pre><span></span><code><span id=__span-9-1><a id=__codelineno-9-1 name=__codelineno-9-1 href=#__codelineno-9-1></a><span class=c1># Element: &quot;Login&quot;</span>
</span><span id=__span-9-2><a id=__codelineno-9-2 name=__codelineno-9-2 href=#__codelineno-9-2></a><span class=c1># Strategy: TextDetectionStrategy</span>
</span><span id=__span-9-3><a id=__codelineno-9-3 name=__codelineno-9-3 href=#__codelineno-9-3></a><span class=c1># Process:</span>
</span><span id=__span-9-4><a id=__codelineno-9-4 name=__codelineno-9-4 href=#__codelineno-9-4></a><span class=c1>#   1. Capture screenshot</span>
</span><span id=__span-9-5><a id=__codelineno-9-5 name=__codelineno-9-5 href=#__codelineno-9-5></a><span class=c1>#   2. Run OCR on screenshot</span>
</span><span id=__span-9-6><a id=__codelineno-9-6 name=__codelineno-9-6 href=#__codelineno-9-6></a><span class=c1>#   3. Find &quot;Login&quot; text in OCR results</span>
</span><span id=__span-9-7><a id=__codelineno-9-7 name=__codelineno-9-7 href=#__codelineno-9-7></a><span class=c1>#   4. Return center coordinates</span>
</span><span id=__span-9-8><a id=__codelineno-9-8 name=__codelineno-9-8 href=#__codelineno-9-8></a><span class=n>press_element</span><span class=p>(</span><span class=s2>&quot;Login&quot;</span><span class=p>)</span>
</span></code></pre></div></p> <p><strong>Text with Index:</strong> <div class="language-python highlight"><pre><span></span><code><span id=__span-10-1><a id=__codelineno-10-1 name=__codelineno-10-1 href=#__codelineno-10-1></a><span class=c1># Get second occurrence of &quot;Submit&quot;</span>
</span><span id=__span-10-2><a id=__codelineno-10-2 name=__codelineno-10-2 href=#__codelineno-10-2></a><span class=n>press_element</span><span class=p>(</span><span class=s2>&quot;Submit&quot;</span><span class=p>,</span> <span class=n>index</span><span class=o>=</span><span class=mi>1</span><span class=p>)</span>
</span></code></pre></div></p> <p><strong>Text in Specific Language:</strong> <div class="language-python highlight"><pre><span></span><code><span id=__span-11-1><a id=__codelineno-11-1 name=__codelineno-11-1 href=#__codelineno-11-1></a><span class=c1># Configure OCR for specific language</span>
</span><span id=__span-11-2><a id=__codelineno-11-2 name=__codelineno-11-2 href=#__codelineno-11-2></a><span class=c1># In config.yaml:</span>
</span><span id=__span-11-3><a id=__codelineno-11-3 name=__codelineno-11-3 href=#__codelineno-11-3></a><span class=n>text_detection</span><span class=p>:</span>
</span><span id=__span-11-4><a id=__codelineno-11-4 name=__codelineno-11-4 href=#__codelineno-11-4></a>  <span class=o>-</span> <span class=n>easyocr</span><span class=p>:</span>
</span><span id=__span-11-5><a id=__codelineno-11-5 name=__codelineno-11-5 href=#__codelineno-11-5></a>      <span class=n>enabled</span><span class=p>:</span> <span class=n>true</span>
</span><span id=__span-11-6><a id=__codelineno-11-6 name=__codelineno-11-6 href=#__codelineno-11-6></a>      <span class=n>capabilities</span><span class=p>:</span>
</span><span id=__span-11-7><a id=__codelineno-11-7 name=__codelineno-11-7 href=#__codelineno-11-7></a>        <span class=n>languages</span><span class=p>:</span> <span class=p>[</span><span class=s2>&quot;en&quot;</span><span class=p>,</span> <span class=s2>&quot;es&quot;</span><span class=p>]</span>  <span class=c1># English and Spanish</span>
</span><span id=__span-11-8><a id=__codelineno-11-8 name=__codelineno-11-8 href=#__codelineno-11-8></a>
</span><span id=__span-11-9><a id=__codelineno-11-9 name=__codelineno-11-9 href=#__codelineno-11-9></a><span class=c1># Use in test</span>
</span><span id=__span-11-10><a id=__codelineno-11-10 name=__codelineno-11-10 href=#__codelineno-11-10></a><span class=n>press_element</span><span class=p>(</span><span class=s2>&quot;Iniciar Sesin&quot;</span><span class=p>)</span>  <span class=c1># Spanish text</span>
</span></code></pre></div></p> <p><strong>Performance:</strong> - Slower strategy (typically 1-3s) - Requires screenshot capture - OCR processing time - Accuracy depends on image quality</p> <h3 id=imagedetectionstrategy>ImageDetectionStrategy<a class=headerlink href=#imagedetectionstrategy title="Permanent link">&para;</a></h3> <p><strong>Priority:</strong> 4 (Lowest)</p> <p>Locates elements using image template matching.</p> <h4 id=when-used_3>When Used<a class=headerlink href=#when-used_3 title="Permanent link">&para;</a></h4> <ul> <li>Element type is "Image"</li> <li>Other strategies failed</li> <li>Image detection model is available</li> <li>Element source supports screenshot capture</li> </ul> <h4 id=implementation-flow_1>Implementation Flow<a class=headerlink href=#implementation-flow_1 title="Permanent link">&para;</a></h4> <pre class=mermaid><code>sequenceDiagram
    participant IDS as ImageDetectionStrategy
    participant ES as ElementSource
    participant IM as ImageDetection
    participant SM as StrategyManager

    IDS-&gt;&gt;ES: capture()
    ES--&gt;&gt;IDS: screenshot
    IDS-&gt;&gt;IM: find_element(screenshot, template)
    IM--&gt;&gt;IDS: coordinates
    IDS--&gt;&gt;SM: coordinates</code></pre> <h4 id=features_1>Features<a class=headerlink href=#features_1 title="Permanent link">&para;</a></h4> <ul> <li>Template-based matching</li> <li>SIFT/FLANN feature matching</li> <li>Area of Interest (AOI) support</li> <li>Multiple match support (index-based)</li> </ul> <h4 id=aoi-support>AOI Support<a class=headerlink href=#aoi-support title="Permanent link">&para;</a></h4> <p>The strategy supports locating images within a specified Area of Interest (AOI). AOI allows you to restrict element location to a specific region of the screen, improving performance and accuracy.</p> <p><strong>What is AOI?</strong> Area of Interest (AOI) is a percentage-based region of the screen where element location is performed. Instead of searching the entire screen, the framework crops the screenshot to the AOI region, performs location within that region, then adjusts coordinates back to the full screen.</p> <p><strong>Why Use AOI?</strong> - <strong>Performance</strong>: Smaller search area = faster location - <strong>Accuracy</strong>: Reduces false positives from similar elements elsewhere - <strong>Efficiency</strong>: Focuses vision models on relevant screen area - <strong>Flexibility</strong>: Works with any screen size (percentage-based)</p> <p><strong>AOI Parameters:</strong> - <code>aoi_x</code>: X percentage of AOI top-left corner (0-100) - <code>aoi_y</code>: Y percentage of AOI top-left corner (0-100) - <code>aoi_width</code>: Width percentage of AOI (0-100) - <code>aoi_height</code>: Height percentage of AOI (0-100)</p> <p><strong>Example:</strong> <div class="language-python highlight"><pre><span></span><code><span id=__span-12-1><a id=__codelineno-12-1 name=__codelineno-12-1 href=#__codelineno-12-1></a><span class=c1># Locate element in top-right quarter of screen</span>
</span><span id=__span-12-2><a id=__codelineno-12-2 name=__codelineno-12-2 href=#__codelineno-12-2></a><span class=n>press_element</span><span class=p>(</span>
</span><span id=__span-12-3><a id=__codelineno-12-3 name=__codelineno-12-3 href=#__codelineno-12-3></a>    <span class=s2>&quot;submit_button&quot;</span><span class=p>,</span>
</span><span id=__span-12-4><a id=__codelineno-12-4 name=__codelineno-12-4 href=#__codelineno-12-4></a>    <span class=n>aoi_x</span><span class=o>=</span><span class=s2>&quot;50&quot;</span><span class=p>,</span>      <span class=c1># Start at 50% from left</span>
</span><span id=__span-12-5><a id=__codelineno-12-5 name=__codelineno-12-5 href=#__codelineno-12-5></a>    <span class=n>aoi_y</span><span class=o>=</span><span class=s2>&quot;0&quot;</span><span class=p>,</span>       <span class=c1># Start at top</span>
</span><span id=__span-12-6><a id=__codelineno-12-6 name=__codelineno-12-6 href=#__codelineno-12-6></a>    <span class=n>aoi_width</span><span class=o>=</span><span class=s2>&quot;50&quot;</span><span class=p>,</span>  <span class=c1># 50% width</span>
</span><span id=__span-12-7><a id=__codelineno-12-7 name=__codelineno-12-7 href=#__codelineno-12-7></a>    <span class=n>aoi_height</span><span class=o>=</span><span class=s2>&quot;50&quot;</span>  <span class=c1># 50% height</span>
</span><span id=__span-12-8><a id=__codelineno-12-8 name=__codelineno-12-8 href=#__codelineno-12-8></a><span class=p>)</span>
</span></code></pre></div></p> <p><strong>AOI Implementation Flow:</strong></p> <pre class=mermaid><code>sequenceDiagram
    participant Action
    participant Strategy
    participant Utils
    participant Vision

    Action-&gt;&gt;Strategy: locate_with_aoi(element, aoi_x, aoi_y, aoi_width, aoi_height)
    Strategy-&gt;&gt;Strategy: Capture full screenshot
    Strategy-&gt;&gt;Utils: crop_screenshot_to_aoi(screenshot, aoi_x, aoi_y, aoi_width, aoi_height)
    Utils-&gt;&gt;Utils: Calculate pixel bounds from percentages
    Utils-&gt;&gt;Utils: Crop screenshot to bounds
    Utils--&gt;&gt;Strategy: cropped_screenshot, aoi_bounds
    Strategy-&gt;&gt;Vision: find_element(cropped_screenshot, template)
    Vision--&gt;&gt;Strategy: coordinates (relative to cropped)
    Strategy-&gt;&gt;Utils: adjust_coordinates_for_aoi(coordinates, aoi_bounds)
    Utils--&gt;&gt;Strategy: coordinates (relative to full screenshot)
    Strategy--&gt;&gt;Action: Final coordinates</code></pre> <p><strong>Coordinate Adjustment:</strong> <div class="language-python highlight"><pre><span></span><code><span id=__span-13-1><a id=__codelineno-13-1 name=__codelineno-13-1 href=#__codelineno-13-1></a><span class=k>def</span><span class=w> </span><span class=nf>adjust_coordinates_for_aoi</span><span class=p>(</span><span class=n>coordinates</span><span class=p>,</span> <span class=n>aoi_bounds</span><span class=p>):</span>
</span><span id=__span-13-2><a id=__codelineno-13-2 name=__codelineno-13-2 href=#__codelineno-13-2></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;</span>
</span><span id=__span-13-3><a id=__codelineno-13-3 name=__codelineno-13-3 href=#__codelineno-13-3></a><span class=sd>    Adjust coordinates found in cropped AOI back to full screenshot.</span>
</span><span id=__span-13-4><a id=__codelineno-13-4 name=__codelineno-13-4 href=#__codelineno-13-4></a>
</span><span id=__span-13-5><a id=__codelineno-13-5 name=__codelineno-13-5 href=#__codelineno-13-5></a><span class=sd>    Args:</span>
</span><span id=__span-13-6><a id=__codelineno-13-6 name=__codelineno-13-6 href=#__codelineno-13-6></a><span class=sd>        coordinates: (x, y) found in cropped screenshot</span>
</span><span id=__span-13-7><a id=__codelineno-13-7 name=__codelineno-13-7 href=#__codelineno-13-7></a><span class=sd>        aoi_bounds: (x1, y1, x2, y2) pixel bounds of AOI</span>
</span><span id=__span-13-8><a id=__codelineno-13-8 name=__codelineno-13-8 href=#__codelineno-13-8></a>
</span><span id=__span-13-9><a id=__codelineno-13-9 name=__codelineno-13-9 href=#__codelineno-13-9></a><span class=sd>    Returns:</span>
</span><span id=__span-13-10><a id=__codelineno-13-10 name=__codelineno-13-10 href=#__codelineno-13-10></a><span class=sd>        (adjusted_x, adjusted_y) in full screenshot coordinates</span>
</span><span id=__span-13-11><a id=__codelineno-13-11 name=__codelineno-13-11 href=#__codelineno-13-11></a><span class=sd>    &quot;&quot;&quot;</span>
</span><span id=__span-13-12><a id=__codelineno-13-12 name=__codelineno-13-12 href=#__codelineno-13-12></a>    <span class=n>x</span><span class=p>,</span> <span class=n>y</span> <span class=o>=</span> <span class=n>coordinates</span>
</span><span id=__span-13-13><a id=__codelineno-13-13 name=__codelineno-13-13 href=#__codelineno-13-13></a>    <span class=n>x1</span><span class=p>,</span> <span class=n>y1</span><span class=p>,</span> <span class=n>x2</span><span class=p>,</span> <span class=n>y2</span> <span class=o>=</span> <span class=n>aoi_bounds</span>
</span><span id=__span-13-14><a id=__codelineno-13-14 name=__codelineno-13-14 href=#__codelineno-13-14></a>    <span class=n>adjusted_x</span> <span class=o>=</span> <span class=n>x1</span> <span class=o>+</span> <span class=n>x</span>
</span><span id=__span-13-15><a id=__codelineno-13-15 name=__codelineno-13-15 href=#__codelineno-13-15></a>    <span class=n>adjusted_y</span> <span class=o>=</span> <span class=n>y1</span> <span class=o>+</span> <span class=n>y</span>
</span><span id=__span-13-16><a id=__codelineno-13-16 name=__codelineno-13-16 href=#__codelineno-13-16></a>    <span class=k>return</span> <span class=p>(</span><span class=n>adjusted_x</span><span class=p>,</span> <span class=n>adjusted_y</span><span class=p>)</span>
</span></code></pre></div></p> <p><strong>AOI Validation:</strong> <div class="language-python highlight"><pre><span></span><code><span id=__span-14-1><a id=__codelineno-14-1 name=__codelineno-14-1 href=#__codelineno-14-1></a><span class=k>def</span><span class=w> </span><span class=nf>calculate_aoi_bounds</span><span class=p>(</span><span class=n>screenshot_shape</span><span class=p>,</span> <span class=n>aoi_x</span><span class=p>,</span> <span class=n>aoi_y</span><span class=p>,</span> <span class=n>aoi_width</span><span class=p>,</span> <span class=n>aoi_height</span><span class=p>):</span>
</span><span id=__span-14-2><a id=__codelineno-14-2 name=__codelineno-14-2 href=#__codelineno-14-2></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;</span>
</span><span id=__span-14-3><a id=__codelineno-14-3 name=__codelineno-14-3 href=#__codelineno-14-3></a><span class=sd>    Calculate pixel bounds for AOI from percentage coordinates.</span>
</span><span id=__span-14-4><a id=__codelineno-14-4 name=__codelineno-14-4 href=#__codelineno-14-4></a>
</span><span id=__span-14-5><a id=__codelineno-14-5 name=__codelineno-14-5 href=#__codelineno-14-5></a><span class=sd>    Validates:</span>
</span><span id=__span-14-6><a id=__codelineno-14-6 name=__codelineno-14-6 href=#__codelineno-14-6></a><span class=sd>    - All parameters between 0-100</span>
</span><span id=__span-14-7><a id=__codelineno-14-7 name=__codelineno-14-7 href=#__codelineno-14-7></a><span class=sd>    - AOI doesn&#39;t exceed screen bounds</span>
</span><span id=__span-14-8><a id=__codelineno-14-8 name=__codelineno-14-8 href=#__codelineno-14-8></a><span class=sd>    - Width and height &gt; 0</span>
</span><span id=__span-14-9><a id=__codelineno-14-9 name=__codelineno-14-9 href=#__codelineno-14-9></a><span class=sd>    &quot;&quot;&quot;</span>
</span><span id=__span-14-10><a id=__codelineno-14-10 name=__codelineno-14-10 href=#__codelineno-14-10></a>    <span class=c1># Validation logic</span>
</span><span id=__span-14-11><a id=__codelineno-14-11 name=__codelineno-14-11 href=#__codelineno-14-11></a>    <span class=c1># Calculate pixel bounds</span>
</span><span id=__span-14-12><a id=__codelineno-14-12 name=__codelineno-14-12 href=#__codelineno-14-12></a>    <span class=k>return</span> <span class=p>(</span><span class=n>x1</span><span class=p>,</span> <span class=n>y1</span><span class=p>,</span> <span class=n>x2</span><span class=p>,</span> <span class=n>y2</span><span class=p>)</span>
</span></code></pre></div></p> <p><strong>AOI Annotation:</strong> When AOI is used, screenshots are annotated with the AOI region for debugging:</p> <div class="language-python highlight"><pre><span></span><code><span id=__span-15-1><a id=__codelineno-15-1 name=__codelineno-15-1 href=#__codelineno-15-1></a><span class=k>def</span><span class=w> </span><span class=nf>annotate_aoi_region</span><span class=p>(</span><span class=n>screenshot</span><span class=p>,</span> <span class=n>aoi_x</span><span class=p>,</span> <span class=n>aoi_y</span><span class=p>,</span> <span class=n>aoi_width</span><span class=p>,</span> <span class=n>aoi_height</span><span class=p>):</span>
</span><span id=__span-15-2><a id=__codelineno-15-2 name=__codelineno-15-2 href=#__codelineno-15-2></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;</span>
</span><span id=__span-15-3><a id=__codelineno-15-3 name=__codelineno-15-3 href=#__codelineno-15-3></a><span class=sd>    Draw rectangle on screenshot showing AOI region.</span>
</span><span id=__span-15-4><a id=__codelineno-15-4 name=__codelineno-15-4 href=#__codelineno-15-4></a>
</span><span id=__span-15-5><a id=__codelineno-15-5 name=__codelineno-15-5 href=#__codelineno-15-5></a><span class=sd>    - Red rectangle shows AOI bounds</span>
</span><span id=__span-15-6><a id=__codelineno-15-6 name=__codelineno-15-6 href=#__codelineno-15-6></a><span class=sd>    - Label shows AOI parameters</span>
</span><span id=__span-15-7><a id=__codelineno-15-7 name=__codelineno-15-7 href=#__codelineno-15-7></a><span class=sd>    - Saved to execution output directory</span>
</span><span id=__span-15-8><a id=__codelineno-15-8 name=__codelineno-15-8 href=#__codelineno-15-8></a><span class=sd>    &quot;&quot;&quot;</span>
</span></code></pre></div> <p><strong>Supported Strategies:</strong> - <code>ImageDetectionStrategy</code>: Supports <code>locate_with_aoi()</code> - <code>TextDetectionStrategy</code>: Supports <code>locate_with_aoi()</code> - <code>XPathStrategy</code>: AOI not applicable (uses DOM structure) - <code>TextElementStrategy</code>: AOI not applicable (uses DOM structure)</p> <p><strong>Use Cases:</strong> 1. <strong>Button in Specific Region</strong>: Locate button only in bottom navigation 2. <strong>Form Fields</strong>: Search only in form area, not entire screen 3. <strong>Modal Dialogs</strong>: Focus search on dialog region 4. <strong>Performance Optimization</strong>: Reduce search area for faster location</p> <h4 id=examples_3>Examples<a class=headerlink href=#examples_3 title="Permanent link">&para;</a></h4> <p><strong>Basic Image Matching:</strong> <div class="language-python highlight"><pre><span></span><code><span id=__span-16-1><a id=__codelineno-16-1 name=__codelineno-16-1 href=#__codelineno-16-1></a><span class=c1># Element: &quot;button_template.png&quot;</span>
</span><span id=__span-16-2><a id=__codelineno-16-2 name=__codelineno-16-2 href=#__codelineno-16-2></a><span class=c1># Strategy: ImageDetectionStrategy</span>
</span><span id=__span-16-3><a id=__codelineno-16-3 name=__codelineno-16-3 href=#__codelineno-16-3></a><span class=c1># Process:</span>
</span><span id=__span-16-4><a id=__codelineno-16-4 name=__codelineno-16-4 href=#__codelineno-16-4></a><span class=c1>#   1. Capture screenshot</span>
</span><span id=__span-16-5><a id=__codelineno-16-5 name=__codelineno-16-5 href=#__codelineno-16-5></a><span class=c1>#   2. Load template image from project_path/input_templates/</span>
</span><span id=__span-16-6><a id=__codelineno-16-6 name=__codelineno-16-6 href=#__codelineno-16-6></a><span class=c1>#   3. Match template in screenshot using SIFT/FLANN</span>
</span><span id=__span-16-7><a id=__codelineno-16-7 name=__codelineno-16-7 href=#__codelineno-16-7></a><span class=c1>#   4. Return center coordinates</span>
</span><span id=__span-16-8><a id=__codelineno-16-8 name=__codelineno-16-8 href=#__codelineno-16-8></a><span class=n>press_element</span><span class=p>(</span><span class=s2>&quot;button_template.png&quot;</span><span class=p>)</span>
</span></code></pre></div></p> <p><strong>Image with Index:</strong> <div class="language-python highlight"><pre><span></span><code><span id=__span-17-1><a id=__codelineno-17-1 name=__codelineno-17-1 href=#__codelineno-17-1></a><span class=c1># Get second occurrence of template</span>
</span><span id=__span-17-2><a id=__codelineno-17-2 name=__codelineno-17-2 href=#__codelineno-17-2></a><span class=n>press_element</span><span class=p>(</span><span class=s2>&quot;icon_template.png&quot;</span><span class=p>,</span> <span class=n>index</span><span class=o>=</span><span class=mi>1</span><span class=p>)</span>
</span></code></pre></div></p> <p><strong>Image with AOI:</strong> <div class="language-python highlight"><pre><span></span><code><span id=__span-18-1><a id=__codelineno-18-1 name=__codelineno-18-1 href=#__codelineno-18-1></a><span class=c1># Search for image only in top-right quarter</span>
</span><span id=__span-18-2><a id=__codelineno-18-2 name=__codelineno-18-2 href=#__codelineno-18-2></a><span class=n>press_element</span><span class=p>(</span>
</span><span id=__span-18-3><a id=__codelineno-18-3 name=__codelineno-18-3 href=#__codelineno-18-3></a>    <span class=s2>&quot;button_template.png&quot;</span><span class=p>,</span>
</span><span id=__span-18-4><a id=__codelineno-18-4 name=__codelineno-18-4 href=#__codelineno-18-4></a>    <span class=n>aoi_x</span><span class=o>=</span><span class=s2>&quot;50&quot;</span><span class=p>,</span>      <span class=c1># Start at 50% from left</span>
</span><span id=__span-18-5><a id=__codelineno-18-5 name=__codelineno-18-5 href=#__codelineno-18-5></a>    <span class=n>aoi_y</span><span class=o>=</span><span class=s2>&quot;0&quot;</span><span class=p>,</span>       <span class=c1># Start at top</span>
</span><span id=__span-18-6><a id=__codelineno-18-6 name=__codelineno-18-6 href=#__codelineno-18-6></a>    <span class=n>aoi_width</span><span class=o>=</span><span class=s2>&quot;50&quot;</span><span class=p>,</span>  <span class=c1># 50% width</span>
</span><span id=__span-18-7><a id=__codelineno-18-7 name=__codelineno-18-7 href=#__codelineno-18-7></a>    <span class=n>aoi_height</span><span class=o>=</span><span class=s2>&quot;50&quot;</span>  <span class=c1># 50% height</span>
</span><span id=__span-18-8><a id=__codelineno-18-8 name=__codelineno-18-8 href=#__codelineno-18-8></a><span class=p>)</span>
</span></code></pre></div></p> <p><strong>Template Organization:</strong> <div class="language-text highlight"><pre><span></span><code><span id=__span-19-1><a id=__codelineno-19-1 name=__codelineno-19-1 href=#__codelineno-19-1></a>project/
</span><span id=__span-19-2><a id=__codelineno-19-2 name=__codelineno-19-2 href=#__codelineno-19-2></a> test_data/
</span><span id=__span-19-3><a id=__codelineno-19-3 name=__codelineno-19-3 href=#__codelineno-19-3></a>     input_templates/
</span><span id=__span-19-4><a id=__codelineno-19-4 name=__codelineno-19-4 href=#__codelineno-19-4></a>         button_template.png
</span><span id=__span-19-5><a id=__codelineno-19-5 name=__codelineno-19-5 href=#__codelineno-19-5></a>         login_form.png
</span><span id=__span-19-6><a id=__codelineno-19-6 name=__codelineno-19-6 href=#__codelineno-19-6></a>         submit_button.png
</span></code></pre></div></p> <p><strong>Performance:</strong> - Slowest strategy (typically 2-5s) - Requires screenshot capture - SIFT feature detection - FLANN matching computation - Performance improves with AOI</p> <h2 id=strategy-selection>Strategy Selection<a class=headerlink href=#strategy-selection title="Permanent link">&para;</a></h2> <h3 id=automatic-selection>Automatic Selection<a class=headerlink href=#automatic-selection title="Permanent link">&para;</a></h3> <p>Strategies are automatically selected based on:</p> <ol> <li><strong>Element Type</strong>: Determined from element identifier</li> <li>XPath: <code>//button[@id='submit']</code></li> <li>Text: <code>"Submit Button"</code></li> <li> <p>Image: <code>button_template.png</code></p> </li> <li> <p><strong>Element Source Capabilities</strong>: Checked via <code>supports()</code> method</p> </li> <li>Does element source implement required methods?</li> <li> <p>Is the method actually implemented (not a stub)?</p> </li> <li> <p><strong>Priority Ordering</strong>: Strategies tried in priority order</p> </li> <li>Higher priority = tried first</li> <li>Lower priority = fallback option</li> </ol> <h3 id=strategy-factory>Strategy Factory<a class=headerlink href=#strategy-factory title="Permanent link">&para;</a></h3> <p><strong>Location:</strong> <code>optics_framework/common/strategies.py</code></p> <p>The <code>StrategyFactory</code> creates strategies based on element source capabilities.</p> <div class="language-python highlight"><pre><span></span><code><span id=__span-20-1><a id=__codelineno-20-1 name=__codelineno-20-1 href=#__codelineno-20-1></a><span class=k>class</span><span class=w> </span><span class=nc>StrategyFactory</span><span class=p>:</span>
</span><span id=__span-20-2><a id=__codelineno-20-2 name=__codelineno-20-2 href=#__codelineno-20-2></a>    <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>text_detection</span><span class=p>,</span> <span class=n>image_detection</span><span class=p>,</span> <span class=n>strategy_manager</span><span class=p>):</span>
</span><span id=__span-20-3><a id=__codelineno-20-3 name=__codelineno-20-3 href=#__codelineno-20-3></a>        <span class=bp>self</span><span class=o>.</span><span class=n>_registry</span> <span class=o>=</span> <span class=p>[</span>
</span><span id=__span-20-4><a id=__codelineno-20-4 name=__codelineno-20-4 href=#__codelineno-20-4></a>            <span class=p>(</span><span class=n>XPathStrategy</span><span class=p>,</span> <span class=s2>&quot;XPath&quot;</span><span class=p>,</span> <span class=p>{},</span> <span class=mi>1</span><span class=p>),</span>
</span><span id=__span-20-5><a id=__codelineno-20-5 name=__codelineno-20-5 href=#__codelineno-20-5></a>            <span class=p>(</span><span class=n>TextElementStrategy</span><span class=p>,</span> <span class=s2>&quot;Text&quot;</span><span class=p>,</span> <span class=p>{},</span> <span class=mi>2</span><span class=p>),</span>
</span><span id=__span-20-6><a id=__codelineno-20-6 name=__codelineno-20-6 href=#__codelineno-20-6></a>            <span class=p>(</span><span class=n>TextDetectionStrategy</span><span class=p>,</span> <span class=s2>&quot;Text&quot;</span><span class=p>,</span> <span class=p>{</span><span class=o>...</span><span class=p>},</span> <span class=mi>3</span><span class=p>),</span>
</span><span id=__span-20-7><a id=__codelineno-20-7 name=__codelineno-20-7 href=#__codelineno-20-7></a>            <span class=p>(</span><span class=n>ImageDetectionStrategy</span><span class=p>,</span> <span class=s2>&quot;Image&quot;</span><span class=p>,</span> <span class=p>{</span><span class=o>...</span><span class=p>},</span> <span class=mi>4</span><span class=p>),</span>
</span><span id=__span-20-8><a id=__codelineno-20-8 name=__codelineno-20-8 href=#__codelineno-20-8></a>        <span class=p>]</span>
</span></code></pre></div> <h3 id=strategy-creation>Strategy Creation<a class=headerlink href=#strategy-creation title="Permanent link">&para;</a></h3> <div class="language-python highlight"><pre><span></span><code><span id=__span-21-1><a id=__codelineno-21-1 name=__codelineno-21-1 href=#__codelineno-21-1></a><span class=k>def</span><span class=w> </span><span class=nf>create_strategies</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>element_source</span><span class=p>):</span>
</span><span id=__span-21-2><a id=__codelineno-21-2 name=__codelineno-21-2 href=#__codelineno-21-2></a>    <span class=n>strategies</span> <span class=o>=</span> <span class=p>[</span>
</span><span id=__span-21-3><a id=__codelineno-21-3 name=__codelineno-21-3 href=#__codelineno-21-3></a>        <span class=p>(</span><span class=bp>cls</span><span class=p>(</span><span class=n>element_source</span><span class=p>,</span> <span class=o>**</span><span class=n>args</span><span class=p>),</span> <span class=n>priority</span><span class=p>)</span>
</span><span id=__span-21-4><a id=__codelineno-21-4 name=__codelineno-21-4 href=#__codelineno-21-4></a>        <span class=k>for</span> <span class=bp>cls</span><span class=p>,</span> <span class=n>etype</span><span class=p>,</span> <span class=n>args</span><span class=p>,</span> <span class=n>priority</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_registry</span>
</span><span id=__span-21-5><a id=__codelineno-21-5 name=__codelineno-21-5 href=#__codelineno-21-5></a>        <span class=k>if</span> <span class=bp>cls</span><span class=o>.</span><span class=n>supports</span><span class=p>(</span><span class=n>etype</span><span class=p>,</span> <span class=n>element_source</span><span class=p>)</span>
</span><span id=__span-21-6><a id=__codelineno-21-6 name=__codelineno-21-6 href=#__codelineno-21-6></a>    <span class=p>]</span>
</span><span id=__span-21-7><a id=__codelineno-21-7 name=__codelineno-21-7 href=#__codelineno-21-7></a>    <span class=n>strategies</span><span class=o>.</span><span class=n>sort</span><span class=p>(</span><span class=n>key</span><span class=o>=</span><span class=k>lambda</span> <span class=n>x</span><span class=p>:</span> <span class=n>x</span><span class=p>[</span><span class=mi>1</span><span class=p>])</span>  <span class=c1># Sort by priority</span>
</span><span id=__span-21-8><a id=__codelineno-21-8 name=__codelineno-21-8 href=#__codelineno-21-8></a>    <span class=k>return</span> <span class=p>[</span><span class=n>strategy</span> <span class=k>for</span> <span class=n>strategy</span><span class=p>,</span> <span class=n>_</span> <span class=ow>in</span> <span class=n>strategies</span><span class=p>]</span>
</span></code></pre></div> <h2 id=fallback-mechanism>Fallback Mechanism<a class=headerlink href=#fallback-mechanism title="Permanent link">&para;</a></h2> <h3 id=multi-level-fallback>Multi-Level Fallback<a class=headerlink href=#multi-level-fallback title="Permanent link">&para;</a></h3> <p>The framework implements fallback at multiple levels:</p> <pre class=mermaid><code>graph TB
    A[Action Request] --&gt; B[StrategyManager]
    B --&gt; C{Try Strategy 1}
    C --&gt;|Success| D[Return Result]
    C --&gt;|Fail| E{Try Strategy 2}
    E --&gt;|Success| D
    E --&gt;|Fail| F{Try Strategy 3}
    F --&gt;|Success| D
    F --&gt;|Fail| G{Try Strategy 4}
    G --&gt;|Success| D
    G --&gt;|Fail| H[All Strategies Failed]</code></pre> <h3 id=strategy-fallback-flow>Strategy Fallback Flow<a class=headerlink href=#strategy-fallback-flow title="Permanent link">&para;</a></h3> <div class="language-python highlight"><pre><span></span><code><span id=__span-22-1><a id=__codelineno-22-1 name=__codelineno-22-1 href=#__codelineno-22-1></a><span class=k>def</span><span class=w> </span><span class=nf>locate</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>element</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>index</span><span class=p>:</span> <span class=nb>int</span> <span class=o>=</span> <span class=mi>0</span><span class=p>):</span>
</span><span id=__span-22-2><a id=__codelineno-22-2 name=__codelineno-22-2 href=#__codelineno-22-2></a>    <span class=n>results</span> <span class=o>=</span> <span class=p>[]</span>
</span><span id=__span-22-3><a id=__codelineno-22-3 name=__codelineno-22-3 href=#__codelineno-22-3></a>    <span class=k>for</span> <span class=n>strategy</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>locator_strategies</span><span class=p>:</span>
</span><span id=__span-22-4><a id=__codelineno-22-4 name=__codelineno-22-4 href=#__codelineno-22-4></a>        <span class=k>try</span><span class=p>:</span>
</span><span id=__span-22-5><a id=__codelineno-22-5 name=__codelineno-22-5 href=#__codelineno-22-5></a>            <span class=n>result</span> <span class=o>=</span> <span class=n>strategy</span><span class=o>.</span><span class=n>locate</span><span class=p>(</span><span class=n>element</span><span class=p>,</span> <span class=n>index</span><span class=p>)</span>
</span><span id=__span-22-6><a id=__codelineno-22-6 name=__codelineno-22-6 href=#__codelineno-22-6></a>            <span class=k>if</span> <span class=n>result</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-22-7><a id=__codelineno-22-7 name=__codelineno-22-7 href=#__codelineno-22-7></a>                <span class=n>results</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>LocateResult</span><span class=p>(</span><span class=n>result</span><span class=p>,</span> <span class=n>strategy</span><span class=p>))</span>
</span><span id=__span-22-8><a id=__codelineno-22-8 name=__codelineno-22-8 href=#__codelineno-22-8></a>        <span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
</span><span id=__span-22-9><a id=__codelineno-22-9 name=__codelineno-22-9 href=#__codelineno-22-9></a>            <span class=n>internal_logger</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Strategy </span><span class=si>{</span><span class=n>strategy</span><span class=si>}</span><span class=s2> failed: </span><span class=si>{</span><span class=n>e</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
</span><span id=__span-22-10><a id=__codelineno-22-10 name=__codelineno-22-10 href=#__codelineno-22-10></a>            <span class=k>continue</span>
</span><span id=__span-22-11><a id=__codelineno-22-11 name=__codelineno-22-11 href=#__codelineno-22-11></a>
</span><span id=__span-22-12><a id=__codelineno-22-12 name=__codelineno-22-12 href=#__codelineno-22-12></a>    <span class=c1># Yield results from all successful strategies</span>
</span><span id=__span-22-13><a id=__codelineno-22-13 name=__codelineno-22-13 href=#__codelineno-22-13></a>    <span class=k>for</span> <span class=n>result</span> <span class=ow>in</span> <span class=n>results</span><span class=p>:</span>
</span><span id=__span-22-14><a id=__codelineno-22-14 name=__codelineno-22-14 href=#__codelineno-22-14></a>        <span class=k>yield</span> <span class=n>result</span>
</span></code></pre></div> <h3 id=element-source-fallback>Element Source Fallback<a class=headerlink href=#element-source-fallback title="Permanent link">&para;</a></h3> <p>If multiple element sources are configured, they're tried in order:</p> <div class="language-python highlight"><pre><span></span><code><span id=__span-23-1><a id=__codelineno-23-1 name=__codelineno-23-1 href=#__codelineno-23-1></a><span class=c1># If AppiumScreenshot fails, try SeleniumScreenshot</span>
</span><span id=__span-23-2><a id=__codelineno-23-2 name=__codelineno-23-2 href=#__codelineno-23-2></a><span class=n>element_source_fallback</span><span class=o>.</span><span class=n>capture</span><span class=p>()</span>
</span></code></pre></div> <h3 id=vision-model-fallback>Vision Model Fallback<a class=headerlink href=#vision-model-fallback title="Permanent link">&para;</a></h3> <p>If multiple vision models are configured, they're tried in order:</p> <div class="language-python highlight"><pre><span></span><code><span id=__span-24-1><a id=__codelineno-24-1 name=__codelineno-24-1 href=#__codelineno-24-1></a><span class=c1># If EasyOCR fails, try GoogleVision</span>
</span><span id=__span-24-2><a id=__codelineno-24-2 name=__codelineno-24-2 href=#__codelineno-24-2></a><span class=n>text_detection_fallback</span><span class=o>.</span><span class=n>detect_text</span><span class=p>(</span><span class=n>screenshot</span><span class=p>)</span>
</span></code></pre></div> <h2 id=self-healing-decorator>Self-Healing Decorator<a class=headerlink href=#self-healing-decorator title="Permanent link">&para;</a></h2> <p><strong>Location:</strong> <code>optics_framework/api/action_keyword.py</code></p> <p>The <code>@with_self_healing</code> decorator wraps action methods to provide automatic fallback and self-healing capabilities. It orchestrates element location, handles multiple results, and provides comprehensive error handling.</p> <h3 id=decorator-flow>Decorator Flow<a class=headerlink href=#decorator-flow title="Permanent link">&para;</a></h3> <pre class=mermaid><code>sequenceDiagram
    participant Action as Action Method
    participant Decorator as @with_self_healing
    participant SM as StrategyManager
    participant Strategy as Strategy
    participant Driver as Driver
    participant Utils as Utils

    Action-&gt;&gt;Decorator: press_element(element, aoi_x, aoi_y, ...)
    Decorator-&gt;&gt;SM: capture_screenshot()
    SM--&gt;&gt;Decorator: screenshot
    Decorator-&gt;&gt;Utils: save_screenshot() or annotate_aoi_region()
    Utils--&gt;&gt;Decorator: saved
    Decorator-&gt;&gt;SM: locate(element, aoi_x, aoi_y, ...)
    SM-&gt;&gt;Strategy: try strategies
    Strategy--&gt;&gt;SM: LocateResult
    SM--&gt;&gt;Decorator: results (generator)
    loop For each result
        Decorator-&gt;&gt;Action: func(element, located=result.value, ...)
        alt Success
            Action--&gt;&gt;Decorator: success
            Decorator--&gt;&gt;Action: return result
        else Failure
            Action--&gt;&gt;Decorator: exception
            Decorator-&gt;&gt;Decorator: log error, try next
        end
    end
    alt All failed
        Decorator--&gt;&gt;Action: raise OpticsError
    end</code></pre> <h3 id=implementation-details>Implementation Details<a class=headerlink href=#implementation-details title="Permanent link">&para;</a></h3> <p><strong>Decorator Signature:</strong> <div class="language-python highlight"><pre><span></span><code><span id=__span-25-1><a id=__codelineno-25-1 name=__codelineno-25-1 href=#__codelineno-25-1></a><span class=k>def</span><span class=w> </span><span class=nf>with_self_healing</span><span class=p>(</span><span class=n>func</span><span class=p>:</span> <span class=n>Callable</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Callable</span><span class=p>:</span>
</span><span id=__span-25-2><a id=__codelineno-25-2 name=__codelineno-25-2 href=#__codelineno-25-2></a>    <span class=nd>@wraps</span><span class=p>(</span><span class=n>func</span><span class=p>)</span>
</span><span id=__span-25-3><a id=__codelineno-25-3 name=__codelineno-25-3 href=#__codelineno-25-3></a>    <span class=k>def</span><span class=w> </span><span class=nf>wrapper</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>element</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
</span><span id=__span-25-4><a id=__codelineno-25-4 name=__codelineno-25-4 href=#__codelineno-25-4></a>        <span class=c1># Implementation</span>
</span><span id=__span-25-5><a id=__codelineno-25-5 name=__codelineno-25-5 href=#__codelineno-25-5></a>    <span class=k>return</span> <span class=n>wrapper</span>
</span></code></pre></div></p> <p><strong>Step-by-Step Process:</strong></p> <p><strong>1. Screenshot Capture:</strong> <div class="language-python highlight"><pre><span></span><code><span id=__span-26-1><a id=__codelineno-26-1 name=__codelineno-26-1 href=#__codelineno-26-1></a><span class=c1># Capture screenshot before location</span>
</span><span id=__span-26-2><a id=__codelineno-26-2 name=__codelineno-26-2 href=#__codelineno-26-2></a><span class=n>screenshot_np</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>strategy_manager</span><span class=o>.</span><span class=n>capture_screenshot</span><span class=p>()</span>
</span></code></pre></div></p> <p><strong>2. AOI Parameter Extraction:</strong> <div class="language-python highlight"><pre><span></span><code><span id=__span-27-1><a id=__codelineno-27-1 name=__codelineno-27-1 href=#__codelineno-27-1></a><span class=c1># Extract and parse AOI parameters</span>
</span><span id=__span-27-2><a id=__codelineno-27-2 name=__codelineno-27-2 href=#__codelineno-27-2></a><span class=n>aoi_x</span> <span class=o>=</span> <span class=n>parse_aoi_param</span><span class=p>(</span><span class=n>kwargs</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=s1>&#39;aoi_x&#39;</span><span class=p>,</span> <span class=s1>&#39;0&#39;</span><span class=p>),</span> <span class=mi>0</span><span class=p>)</span>
</span><span id=__span-27-3><a id=__codelineno-27-3 name=__codelineno-27-3 href=#__codelineno-27-3></a><span class=n>aoi_y</span> <span class=o>=</span> <span class=n>parse_aoi_param</span><span class=p>(</span><span class=n>kwargs</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=s1>&#39;aoi_y&#39;</span><span class=p>,</span> <span class=s1>&#39;0&#39;</span><span class=p>),</span> <span class=mi>0</span><span class=p>)</span>
</span><span id=__span-27-4><a id=__codelineno-27-4 name=__codelineno-27-4 href=#__codelineno-27-4></a><span class=n>aoi_width</span> <span class=o>=</span> <span class=n>parse_aoi_param</span><span class=p>(</span><span class=n>kwargs</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=s1>&#39;aoi_width&#39;</span><span class=p>,</span> <span class=s1>&#39;100&#39;</span><span class=p>),</span> <span class=mi>100</span><span class=p>)</span>
</span><span id=__span-27-5><a id=__codelineno-27-5 name=__codelineno-27-5 href=#__codelineno-27-5></a><span class=n>aoi_height</span> <span class=o>=</span> <span class=n>parse_aoi_param</span><span class=p>(</span><span class=n>kwargs</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=s1>&#39;aoi_height&#39;</span><span class=p>,</span> <span class=s1>&#39;100&#39;</span><span class=p>),</span> <span class=mi>100</span><span class=p>)</span>
</span><span id=__span-27-6><a id=__codelineno-27-6 name=__codelineno-27-6 href=#__codelineno-27-6></a>
</span><span id=__span-27-7><a id=__codelineno-27-7 name=__codelineno-27-7 href=#__codelineno-27-7></a><span class=c1># Check if AOI is being used</span>
</span><span id=__span-27-8><a id=__codelineno-27-8 name=__codelineno-27-8 href=#__codelineno-27-8></a><span class=n>is_aoi_used</span> <span class=o>=</span> <span class=ow>not</span> <span class=p>(</span><span class=n>aoi_x</span> <span class=o>==</span> <span class=mi>0</span> <span class=ow>and</span> <span class=n>aoi_y</span> <span class=o>==</span> <span class=mi>0</span> <span class=ow>and</span> <span class=n>aoi_width</span> <span class=o>==</span> <span class=mi>100</span> <span class=ow>and</span> <span class=n>aoi_height</span> <span class=o>==</span> <span class=mi>100</span><span class=p>)</span>
</span></code></pre></div></p> <p><strong>3. Screenshot Saving:</strong> <div class="language-python highlight"><pre><span></span><code><span id=__span-28-1><a id=__codelineno-28-1 name=__codelineno-28-1 href=#__codelineno-28-1></a><span class=c1># Save screenshot with AOI annotation if AOI is used</span>
</span><span id=__span-28-2><a id=__codelineno-28-2 name=__codelineno-28-2 href=#__codelineno-28-2></a><span class=k>if</span> <span class=n>is_aoi_used</span><span class=p>:</span>
</span><span id=__span-28-3><a id=__codelineno-28-3 name=__codelineno-28-3 href=#__codelineno-28-3></a>    <span class=n>annotated_screenshot</span> <span class=o>=</span> <span class=n>utils</span><span class=o>.</span><span class=n>annotate_aoi_region</span><span class=p>(</span>
</span><span id=__span-28-4><a id=__codelineno-28-4 name=__codelineno-28-4 href=#__codelineno-28-4></a>        <span class=n>screenshot_np</span><span class=p>,</span> <span class=n>aoi_x</span><span class=p>,</span> <span class=n>aoi_y</span><span class=p>,</span> <span class=n>aoi_width</span><span class=p>,</span> <span class=n>aoi_height</span>
</span><span id=__span-28-5><a id=__codelineno-28-5 name=__codelineno-28-5 href=#__codelineno-28-5></a>    <span class=p>)</span>
</span><span id=__span-28-6><a id=__codelineno-28-6 name=__codelineno-28-6 href=#__codelineno-28-6></a>    <span class=n>utils</span><span class=o>.</span><span class=n>save_screenshot</span><span class=p>(</span>
</span><span id=__span-28-7><a id=__codelineno-28-7 name=__codelineno-28-7 href=#__codelineno-28-7></a>        <span class=n>annotated_screenshot</span><span class=p>,</span>
</span><span id=__span-28-8><a id=__codelineno-28-8 name=__codelineno-28-8 href=#__codelineno-28-8></a>        <span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=n>func</span><span class=o>.</span><span class=vm>__name__</span><span class=si>}</span><span class=s2>_with_aoi&quot;</span><span class=p>,</span>
</span><span id=__span-28-9><a id=__codelineno-28-9 name=__codelineno-28-9 href=#__codelineno-28-9></a>        <span class=n>output_dir</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>execution_dir</span>
</span><span id=__span-28-10><a id=__codelineno-28-10 name=__codelineno-28-10 href=#__codelineno-28-10></a>    <span class=p>)</span>
</span><span id=__span-28-11><a id=__codelineno-28-11 name=__codelineno-28-11 href=#__codelineno-28-11></a><span class=k>else</span><span class=p>:</span>
</span><span id=__span-28-12><a id=__codelineno-28-12 name=__codelineno-28-12 href=#__codelineno-28-12></a>    <span class=n>utils</span><span class=o>.</span><span class=n>save_screenshot</span><span class=p>(</span>
</span><span id=__span-28-13><a id=__codelineno-28-13 name=__codelineno-28-13 href=#__codelineno-28-13></a>        <span class=n>screenshot_np</span><span class=p>,</span>
</span><span id=__span-28-14><a id=__codelineno-28-14 name=__codelineno-28-14 href=#__codelineno-28-14></a>        <span class=n>func</span><span class=o>.</span><span class=vm>__name__</span><span class=p>,</span>
</span><span id=__span-28-15><a id=__codelineno-28-15 name=__codelineno-28-15 href=#__codelineno-28-15></a>        <span class=n>output_dir</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>execution_dir</span>
</span><span id=__span-28-16><a id=__codelineno-28-16 name=__codelineno-28-16 href=#__codelineno-28-16></a>    <span class=p>)</span>
</span></code></pre></div></p> <p><strong>4. Element Location:</strong> <div class="language-python highlight"><pre><span></span><code><span id=__span-29-1><a id=__codelineno-29-1 name=__codelineno-29-1 href=#__codelineno-29-1></a><span class=c1># Locate element with or without AOI</span>
</span><span id=__span-29-2><a id=__codelineno-29-2 name=__codelineno-29-2 href=#__codelineno-29-2></a><span class=k>if</span> <span class=n>is_aoi_used</span><span class=p>:</span>
</span><span id=__span-29-3><a id=__codelineno-29-3 name=__codelineno-29-3 href=#__codelineno-29-3></a>    <span class=n>results</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>strategy_manager</span><span class=o>.</span><span class=n>locate</span><span class=p>(</span>
</span><span id=__span-29-4><a id=__codelineno-29-4 name=__codelineno-29-4 href=#__codelineno-29-4></a>        <span class=n>element</span><span class=p>,</span> <span class=n>aoi_x</span><span class=p>,</span> <span class=n>aoi_y</span><span class=p>,</span> <span class=n>aoi_width</span><span class=p>,</span> <span class=n>aoi_height</span><span class=p>,</span> <span class=n>index</span><span class=o>=</span><span class=n>index</span>
</span><span id=__span-29-5><a id=__codelineno-29-5 name=__codelineno-29-5 href=#__codelineno-29-5></a>    <span class=p>)</span>
</span><span id=__span-29-6><a id=__codelineno-29-6 name=__codelineno-29-6 href=#__codelineno-29-6></a><span class=k>else</span><span class=p>:</span>
</span><span id=__span-29-7><a id=__codelineno-29-7 name=__codelineno-29-7 href=#__codelineno-29-7></a>    <span class=n>results</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>strategy_manager</span><span class=o>.</span><span class=n>locate</span><span class=p>(</span><span class=n>element</span><span class=p>,</span> <span class=n>index</span><span class=o>=</span><span class=n>index</span><span class=p>)</span>
</span></code></pre></div></p> <p><strong>5. Result Iteration:</strong> <div class="language-python highlight"><pre><span></span><code><span id=__span-30-1><a id=__codelineno-30-1 name=__codelineno-30-1 href=#__codelineno-30-1></a><span class=n>last_exception</span> <span class=o>=</span> <span class=kc>None</span>
</span><span id=__span-30-2><a id=__codelineno-30-2 name=__codelineno-30-2 href=#__codelineno-30-2></a><span class=n>result_count</span> <span class=o>=</span> <span class=mi>0</span>
</span><span id=__span-30-3><a id=__codelineno-30-3 name=__codelineno-30-3 href=#__codelineno-30-3></a>
</span><span id=__span-30-4><a id=__codelineno-30-4 name=__codelineno-30-4 href=#__codelineno-30-4></a><span class=k>for</span> <span class=n>result</span> <span class=ow>in</span> <span class=n>results</span><span class=p>:</span>
</span><span id=__span-30-5><a id=__codelineno-30-5 name=__codelineno-30-5 href=#__codelineno-30-5></a>    <span class=n>result_count</span> <span class=o>+=</span> <span class=mi>1</span>
</span><span id=__span-30-6><a id=__codelineno-30-6 name=__codelineno-30-6 href=#__codelineno-30-6></a>    <span class=k>try</span><span class=p>:</span>
</span><span id=__span-30-7><a id=__codelineno-30-7 name=__codelineno-30-7 href=#__codelineno-30-7></a>        <span class=c1># Try executing action with this result</span>
</span><span id=__span-30-8><a id=__codelineno-30-8 name=__codelineno-30-8 href=#__codelineno-30-8></a>        <span class=k>return</span> <span class=n>func</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>element</span><span class=p>,</span> <span class=n>located</span><span class=o>=</span><span class=n>result</span><span class=o>.</span><span class=n>value</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span>
</span><span id=__span-30-9><a id=__codelineno-30-9 name=__codelineno-30-9 href=#__codelineno-30-9></a>    <span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
</span><span id=__span-30-10><a id=__codelineno-30-10 name=__codelineno-30-10 href=#__codelineno-30-10></a>        <span class=c1># Log error and try next result</span>
</span><span id=__span-30-11><a id=__codelineno-30-11 name=__codelineno-30-11 href=#__codelineno-30-11></a>        <span class=n>internal_logger</span><span class=o>.</span><span class=n>error</span><span class=p>(</span>
</span><span id=__span-30-12><a id=__codelineno-30-12 name=__codelineno-30-12 href=#__codelineno-30-12></a>            <span class=sa>f</span><span class=s2>&quot;Action &#39;</span><span class=si>{</span><span class=n>func</span><span class=o>.</span><span class=vm>__name__</span><span class=si>}</span><span class=s2>&#39; failed with &quot;</span>
</span><span id=__span-30-13><a id=__codelineno-30-13 name=__codelineno-30-13 href=#__codelineno-30-13></a>            <span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=n>result</span><span class=o>.</span><span class=n>strategy</span><span class=o>.</span><span class=vm>__class__</span><span class=o>.</span><span class=vm>__name__</span><span class=si>}</span><span class=s2>: </span><span class=si>{</span><span class=n>e</span><span class=si>}</span><span class=s2>&quot;</span>
</span><span id=__span-30-14><a id=__codelineno-30-14 name=__codelineno-30-14 href=#__codelineno-30-14></a>        <span class=p>)</span>
</span><span id=__span-30-15><a id=__codelineno-30-15 name=__codelineno-30-15 href=#__codelineno-30-15></a>        <span class=n>last_exception</span> <span class=o>=</span> <span class=n>e</span>
</span><span id=__span-30-16><a id=__codelineno-30-16 name=__codelineno-30-16 href=#__codelineno-30-16></a>        <span class=k>continue</span>  <span class=c1># Try next result</span>
</span></code></pre></div></p> <p><strong>6. Error Handling:</strong> <div class="language-python highlight"><pre><span></span><code><span id=__span-31-1><a id=__codelineno-31-1 name=__codelineno-31-1 href=#__codelineno-31-1></a><span class=c1># Handle different failure scenarios</span>
</span><span id=__span-31-2><a id=__codelineno-31-2 name=__codelineno-31-2 href=#__codelineno-31-2></a><span class=k>if</span> <span class=n>result_count</span> <span class=o>==</span> <span class=mi>0</span><span class=p>:</span>
</span><span id=__span-31-3><a id=__codelineno-31-3 name=__codelineno-31-3 href=#__codelineno-31-3></a>    <span class=c1># No strategies yielded a result</span>
</span><span id=__span-31-4><a id=__codelineno-31-4 name=__codelineno-31-4 href=#__codelineno-31-4></a>    <span class=k>raise</span> <span class=n>OpticsError</span><span class=p>(</span>
</span><span id=__span-31-5><a id=__codelineno-31-5 name=__codelineno-31-5 href=#__codelineno-31-5></a>        <span class=n>Code</span><span class=o>.</span><span class=n>E0201</span><span class=p>,</span>
</span><span id=__span-31-6><a id=__codelineno-31-6 name=__codelineno-31-6 href=#__codelineno-31-6></a>        <span class=n>message</span><span class=o>=</span><span class=sa>f</span><span class=s2>&quot;No valid strategies found for &#39;</span><span class=si>{</span><span class=n>element</span><span class=si>}</span><span class=s2>&#39; in &#39;</span><span class=si>{</span><span class=n>func</span><span class=o>.</span><span class=vm>__name__</span><span class=si>}</span><span class=s2>&#39;&quot;</span>
</span><span id=__span-31-7><a id=__codelineno-31-7 name=__codelineno-31-7 href=#__codelineno-31-7></a>    <span class=p>)</span>
</span><span id=__span-31-8><a id=__codelineno-31-8 name=__codelineno-31-8 href=#__codelineno-31-8></a>
</span><span id=__span-31-9><a id=__codelineno-31-9 name=__codelineno-31-9 href=#__codelineno-31-9></a><span class=k>if</span> <span class=n>last_exception</span><span class=p>:</span>
</span><span id=__span-31-10><a id=__codelineno-31-10 name=__codelineno-31-10 href=#__codelineno-31-10></a>    <span class=c1># All strategies failed</span>
</span><span id=__span-31-11><a id=__codelineno-31-11 name=__codelineno-31-11 href=#__codelineno-31-11></a>    <span class=k>raise</span> <span class=n>OpticsError</span><span class=p>(</span>
</span><span id=__span-31-12><a id=__codelineno-31-12 name=__codelineno-31-12 href=#__codelineno-31-12></a>        <span class=n>Code</span><span class=o>.</span><span class=n>X0201</span><span class=p>,</span>
</span><span id=__span-31-13><a id=__codelineno-31-13 name=__codelineno-31-13 href=#__codelineno-31-13></a>        <span class=n>message</span><span class=o>=</span><span class=sa>f</span><span class=s2>&quot;All strategies failed for &#39;</span><span class=si>{</span><span class=n>element</span><span class=si>}</span><span class=s2>&#39; in &#39;</span><span class=si>{</span><span class=n>func</span><span class=o>.</span><span class=vm>__name__</span><span class=si>}</span><span class=s2>&#39;: </span><span class=si>{</span><span class=n>last_exception</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>,</span>
</span><span id=__span-31-14><a id=__codelineno-31-14 name=__codelineno-31-14 href=#__codelineno-31-14></a>        <span class=n>cause</span><span class=o>=</span><span class=n>last_exception</span>
</span><span id=__span-31-15><a id=__codelineno-31-15 name=__codelineno-31-15 href=#__codelineno-31-15></a>    <span class=p>)</span>
</span><span id=__span-31-16><a id=__codelineno-31-16 name=__codelineno-31-16 href=#__codelineno-31-16></a>
</span><span id=__span-31-17><a id=__codelineno-31-17 name=__codelineno-31-17 href=#__codelineno-31-17></a><span class=c1># Unexpected case</span>
</span><span id=__span-31-18><a id=__codelineno-31-18 name=__codelineno-31-18 href=#__codelineno-31-18></a><span class=k>raise</span> <span class=n>OpticsError</span><span class=p>(</span>
</span><span id=__span-31-19><a id=__codelineno-31-19 name=__codelineno-31-19 href=#__codelineno-31-19></a>    <span class=n>Code</span><span class=o>.</span><span class=n>E0801</span><span class=p>,</span>
</span><span id=__span-31-20><a id=__codelineno-31-20 name=__codelineno-31-20 href=#__codelineno-31-20></a>    <span class=n>message</span><span class=o>=</span><span class=sa>f</span><span class=s2>&quot;Unexpected failure: No results or exceptions for &#39;</span><span class=si>{</span><span class=n>element</span><span class=si>}</span><span class=s2>&#39; in &#39;</span><span class=si>{</span><span class=n>func</span><span class=o>.</span><span class=vm>__name__</span><span class=si>}</span><span class=s2>&#39;&quot;</span>
</span><span id=__span-31-21><a id=__codelineno-31-21 name=__codelineno-31-21 href=#__codelineno-31-21></a><span class=p>)</span>
</span></code></pre></div></p> <h3 id=key-features>Key Features<a class=headerlink href=#key-features title="Permanent link">&para;</a></h3> <p><strong>1. Automatic Screenshot Capture:</strong> - Captures screenshot before element location - Saves screenshot for debugging - Annotates AOI region if used</p> <p><strong>2. Strategy-Based Location:</strong> - Uses StrategyManager to locate element - Supports multiple location strategies - Handles AOI parameters automatically</p> <p><strong>3. Multiple Result Handling:</strong> - Iterates through all successful strategy results - Tries each result until one succeeds - Continues on failure (self-healing)</p> <p><strong>4. Error Aggregation:</strong> - Logs each failure with strategy information - Preserves last exception for error message - Provides detailed error context</p> <p><strong>5. Screenshot Saving:</strong> - Saves screenshots to execution output directory - Annotates AOI regions for debugging - Uses function name for screenshot filename</p> <p><strong>6. AOI Integration:</strong> - Extracts AOI parameters from kwargs - Passes AOI to strategy manager - Annotates screenshots with AOI region</p> <h3 id=usage-example>Usage Example<a class=headerlink href=#usage-example title="Permanent link">&para;</a></h3> <p><strong>Basic Usage:</strong> <div class="language-python highlight"><pre><span></span><code><span id=__span-32-1><a id=__codelineno-32-1 name=__codelineno-32-1 href=#__codelineno-32-1></a><span class=nd>@with_self_healing</span>
</span><span id=__span-32-2><a id=__codelineno-32-2 name=__codelineno-32-2 href=#__codelineno-32-2></a><span class=k>def</span><span class=w> </span><span class=nf>press_element</span><span class=p>(</span>
</span><span id=__span-32-3><a id=__codelineno-32-3 name=__codelineno-32-3 href=#__codelineno-32-3></a>    <span class=bp>self</span><span class=p>,</span>
</span><span id=__span-32-4><a id=__codelineno-32-4 name=__codelineno-32-4 href=#__codelineno-32-4></a>    <span class=n>element</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span>
</span><span id=__span-32-5><a id=__codelineno-32-5 name=__codelineno-32-5 href=#__codelineno-32-5></a>    <span class=n>repeat</span><span class=p>:</span> <span class=nb>str</span> <span class=o>=</span> <span class=s2>&quot;1&quot;</span><span class=p>,</span>
</span><span id=__span-32-6><a id=__codelineno-32-6 name=__codelineno-32-6 href=#__codelineno-32-6></a>    <span class=n>offset_x</span><span class=p>:</span> <span class=nb>str</span> <span class=o>=</span> <span class=s2>&quot;0&quot;</span><span class=p>,</span>
</span><span id=__span-32-7><a id=__codelineno-32-7 name=__codelineno-32-7 href=#__codelineno-32-7></a>    <span class=n>offset_y</span><span class=p>:</span> <span class=nb>str</span> <span class=o>=</span> <span class=s2>&quot;0&quot;</span><span class=p>,</span>
</span><span id=__span-32-8><a id=__codelineno-32-8 name=__codelineno-32-8 href=#__codelineno-32-8></a>    <span class=n>index</span><span class=p>:</span> <span class=nb>str</span> <span class=o>=</span> <span class=s2>&quot;0&quot;</span><span class=p>,</span>
</span><span id=__span-32-9><a id=__codelineno-32-9 name=__codelineno-32-9 href=#__codelineno-32-9></a>    <span class=n>aoi_x</span><span class=p>:</span> <span class=nb>str</span> <span class=o>=</span> <span class=s2>&quot;0&quot;</span><span class=p>,</span>
</span><span id=__span-32-10><a id=__codelineno-32-10 name=__codelineno-32-10 href=#__codelineno-32-10></a>    <span class=n>aoi_y</span><span class=p>:</span> <span class=nb>str</span> <span class=o>=</span> <span class=s2>&quot;0&quot;</span><span class=p>,</span>
</span><span id=__span-32-11><a id=__codelineno-32-11 name=__codelineno-32-11 href=#__codelineno-32-11></a>    <span class=n>aoi_width</span><span class=p>:</span> <span class=nb>str</span> <span class=o>=</span> <span class=s2>&quot;100&quot;</span><span class=p>,</span>
</span><span id=__span-32-12><a id=__codelineno-32-12 name=__codelineno-32-12 href=#__codelineno-32-12></a>    <span class=n>aoi_height</span><span class=p>:</span> <span class=nb>str</span> <span class=o>=</span> <span class=s2>&quot;100&quot;</span><span class=p>,</span>
</span><span id=__span-32-13><a id=__codelineno-32-13 name=__codelineno-32-13 href=#__codelineno-32-13></a>    <span class=n>event_name</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-32-14><a id=__codelineno-32-14 name=__codelineno-32-14 href=#__codelineno-32-14></a>    <span class=o>*</span><span class=p>,</span> <span class=n>located</span><span class=p>:</span> <span class=n>Any</span> <span class=o>=</span> <span class=kc>None</span>
</span><span id=__span-32-15><a id=__codelineno-32-15 name=__codelineno-32-15 href=#__codelineno-32-15></a><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-32-16><a id=__codelineno-32-16 name=__codelineno-32-16 href=#__codelineno-32-16></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;</span>
</span><span id=__span-32-17><a id=__codelineno-32-17 name=__codelineno-32-17 href=#__codelineno-32-17></a><span class=sd>    Press an element with self-healing.</span>
</span><span id=__span-32-18><a id=__codelineno-32-18 name=__codelineno-32-18 href=#__codelineno-32-18></a>
</span><span id=__span-32-19><a id=__codelineno-32-19 name=__codelineno-32-19 href=#__codelineno-32-19></a><span class=sd>    The decorator handles:</span>
</span><span id=__span-32-20><a id=__codelineno-32-20 name=__codelineno-32-20 href=#__codelineno-32-20></a><span class=sd>    - Screenshot capture</span>
</span><span id=__span-32-21><a id=__codelineno-32-21 name=__codelineno-32-21 href=#__codelineno-32-21></a><span class=sd>    - Element location</span>
</span><span id=__span-32-22><a id=__codelineno-32-22 name=__codelineno-32-22 href=#__codelineno-32-22></a><span class=sd>    - Multiple result handling</span>
</span><span id=__span-32-23><a id=__codelineno-32-23 name=__codelineno-32-23 href=#__codelineno-32-23></a><span class=sd>    - Error aggregation</span>
</span><span id=__span-32-24><a id=__codelineno-32-24 name=__codelineno-32-24 href=#__codelineno-32-24></a><span class=sd>    &quot;&quot;&quot;</span>
</span><span id=__span-32-25><a id=__codelineno-32-25 name=__codelineno-32-25 href=#__codelineno-32-25></a>    <span class=c1># located parameter is provided by decorator</span>
</span><span id=__span-32-26><a id=__codelineno-32-26 name=__codelineno-32-26 href=#__codelineno-32-26></a>    <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>located</span><span class=p>,</span> <span class=nb>tuple</span><span class=p>):</span>
</span><span id=__span-32-27><a id=__codelineno-32-27 name=__codelineno-32-27 href=#__codelineno-32-27></a>        <span class=n>x</span><span class=p>,</span> <span class=n>y</span> <span class=o>=</span> <span class=n>located</span>
</span><span id=__span-32-28><a id=__codelineno-32-28 name=__codelineno-32-28 href=#__codelineno-32-28></a>        <span class=bp>self</span><span class=o>.</span><span class=n>driver</span><span class=o>.</span><span class=n>press_coordinates</span><span class=p>(</span><span class=n>x</span> <span class=o>+</span> <span class=nb>int</span><span class=p>(</span><span class=n>offset_x</span><span class=p>),</span> <span class=n>y</span> <span class=o>+</span> <span class=nb>int</span><span class=p>(</span><span class=n>offset_y</span><span class=p>))</span>
</span><span id=__span-32-29><a id=__codelineno-32-29 name=__codelineno-32-29 href=#__codelineno-32-29></a>    <span class=k>else</span><span class=p>:</span>
</span><span id=__span-32-30><a id=__codelineno-32-30 name=__codelineno-32-30 href=#__codelineno-32-30></a>        <span class=bp>self</span><span class=o>.</span><span class=n>driver</span><span class=o>.</span><span class=n>press_element</span><span class=p>(</span><span class=n>located</span><span class=p>,</span> <span class=nb>int</span><span class=p>(</span><span class=n>repeat</span><span class=p>))</span>
</span></code></pre></div></p> <p><strong>With AOI:</strong> <div class="language-python highlight"><pre><span></span><code><span id=__span-33-1><a id=__codelineno-33-1 name=__codelineno-33-1 href=#__codelineno-33-1></a><span class=c1># Press element in specific region</span>
</span><span id=__span-33-2><a id=__codelineno-33-2 name=__codelineno-33-2 href=#__codelineno-33-2></a><span class=n>press_element</span><span class=p>(</span>
</span><span id=__span-33-3><a id=__codelineno-33-3 name=__codelineno-33-3 href=#__codelineno-33-3></a>    <span class=s2>&quot;submit_button&quot;</span><span class=p>,</span>
</span><span id=__span-33-4><a id=__codelineno-33-4 name=__codelineno-33-4 href=#__codelineno-33-4></a>    <span class=n>aoi_x</span><span class=o>=</span><span class=s2>&quot;50&quot;</span><span class=p>,</span>      <span class=c1># Right half of screen</span>
</span><span id=__span-33-5><a id=__codelineno-33-5 name=__codelineno-33-5 href=#__codelineno-33-5></a>    <span class=n>aoi_y</span><span class=o>=</span><span class=s2>&quot;0&quot;</span><span class=p>,</span>       <span class=c1># Top</span>
</span><span id=__span-33-6><a id=__codelineno-33-6 name=__codelineno-33-6 href=#__codelineno-33-6></a>    <span class=n>aoi_width</span><span class=o>=</span><span class=s2>&quot;50&quot;</span><span class=p>,</span>  <span class=c1># 50% width</span>
</span><span id=__span-33-7><a id=__codelineno-33-7 name=__codelineno-33-7 href=#__codelineno-33-7></a>    <span class=n>aoi_height</span><span class=o>=</span><span class=s2>&quot;100&quot;</span> <span class=c1># Full height</span>
</span><span id=__span-33-8><a id=__codelineno-33-8 name=__codelineno-33-8 href=#__codelineno-33-8></a><span class=p>)</span>
</span></code></pre></div></p> <h3 id=error-scenarios>Error Scenarios<a class=headerlink href=#error-scenarios title="Permanent link">&para;</a></h3> <p><strong>1. No Strategies Available:</strong> <div class="language-python highlight"><pre><span></span><code><span id=__span-34-1><a id=__codelineno-34-1 name=__codelineno-34-1 href=#__codelineno-34-1></a><span class=c1># Error: E0201 - No valid strategies found</span>
</span><span id=__span-34-2><a id=__codelineno-34-2 name=__codelineno-34-2 href=#__codelineno-34-2></a><span class=c1># Occurs when no strategies can locate the element</span>
</span></code></pre></div></p> <p><strong>2. All Strategies Failed:</strong> <div class="language-python highlight"><pre><span></span><code><span id=__span-35-1><a id=__codelineno-35-1 name=__codelineno-35-1 href=#__codelineno-35-1></a><span class=c1># Error: X0201 - All strategies failed</span>
</span><span id=__span-35-2><a id=__codelineno-35-2 name=__codelineno-35-2 href=#__codelineno-35-2></a><span class=c1># Occurs when all strategies tried but all failed</span>
</span><span id=__span-35-3><a id=__codelineno-35-3 name=__codelineno-35-3 href=#__codelineno-35-3></a><span class=c1># Includes last exception as cause</span>
</span></code></pre></div></p> <p><strong>3. Unexpected Failure:</strong> <div class="language-python highlight"><pre><span></span><code><span id=__span-36-1><a id=__codelineno-36-1 name=__codelineno-36-1 href=#__codelineno-36-1></a><span class=c1># Error: E0801 - Unexpected failure</span>
</span><span id=__span-36-2><a id=__codelineno-36-2 name=__codelineno-36-2 href=#__codelineno-36-2></a><span class=c1># Occurs in unexpected scenarios</span>
</span></code></pre></div></p> <h3 id=debugging-support>Debugging Support<a class=headerlink href=#debugging-support title="Permanent link">&para;</a></h3> <p><strong>Screenshot Files:</strong> - Saved to <code>execution_output_path</code> - Named after function: <code>press_element.png</code> - AOI annotated: <code>press_element_with_aoi.png</code></p> <p><strong>Logging:</strong> - Each strategy attempt is logged - Failures include strategy name and error - Execution logger shows location attempts</p> <p><strong>Error Messages:</strong> - Include element name - Include function name - Include strategy that failed - Include original exception</p> <h3 id=best-practices>Best Practices<a class=headerlink href=#best-practices title="Permanent link">&para;</a></h3> <ol> <li><strong>Always Use Decorator</strong>: Apply to all element interaction methods</li> <li><strong>Handle Located Parameter</strong>: Check if tuple (coordinates) or object (element)</li> <li><strong>Provide Context</strong>: Include meaningful error messages</li> <li><strong>Save Screenshots</strong>: Enable screenshot saving for debugging</li> <li><strong>Use AOI When Appropriate</strong>: Improve performance and accuracy</li> </ol> <h3 id=integration-points>Integration Points<a class=headerlink href=#integration-points title="Permanent link">&para;</a></h3> <ul> <li><strong>StrategyManager</strong>: For element location</li> <li><strong>Utils</strong>: For screenshot saving and AOI annotation</li> <li><strong>Driver</strong>: For actual action execution</li> <li><strong>Error System</strong>: For error reporting</li> <li><strong>Logging</strong>: For debugging information</li> </ul> <h2 id=screenshot-strategies>Screenshot Strategies<a class=headerlink href=#screenshot-strategies title="Permanent link">&para;</a></h2> <h3 id=screenshotstrategy>ScreenshotStrategy<a class=headerlink href=#screenshotstrategy title="Permanent link">&para;</a></h3> <p>Manages screenshot capture from element sources.</p> <h4 id=features_2>Features<a class=headerlink href=#features_2 title="Permanent link">&para;</a></h4> <ul> <li>Black screen detection</li> <li>Screenshot validation</li> <li>Screenshot streaming support</li> <li>Multiple element source fallback</li> </ul> <h3 id=screenshot-streaming>Screenshot Streaming<a class=headerlink href=#screenshot-streaming title="Permanent link">&para;</a></h3> <p><strong>Location:</strong> <code>optics_framework/common/screenshot_stream.py</code></p> <p>Screenshot streaming provides continuous screenshot capture for timeout-based element location operations. This is useful when waiting for elements to appear or when monitoring screen changes.</p> <h4 id=architecture>Architecture<a class=headerlink href=#architecture title="Permanent link">&para;</a></h4> <pre class=mermaid><code>graph TB
    A[Capture Thread] --&gt; B[Screenshot Queue]
    B --&gt; C[Deduplication Thread]
    C --&gt; D[Filtered Queue]
    D --&gt; E[Strategy/Consumer]

    A --&gt; F[Element Source]
    F --&gt; A</code></pre> <h4 id=key-components>Key Components<a class=headerlink href=#key-components title="Permanent link">&para;</a></h4> <p><strong>ScreenshotStream Class:</strong> <div class="language-python highlight"><pre><span></span><code><span id=__span-37-1><a id=__codelineno-37-1 name=__codelineno-37-1 href=#__codelineno-37-1></a><span class=k>class</span><span class=w> </span><span class=nc>ScreenshotStream</span><span class=p>:</span>
</span><span id=__span-37-2><a id=__codelineno-37-2 name=__codelineno-37-2 href=#__codelineno-37-2></a>    <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>capture_screenshot_callable</span><span class=p>,</span> <span class=n>max_queue_size</span><span class=o>=</span><span class=mi>100</span><span class=p>):</span>
</span><span id=__span-37-3><a id=__codelineno-37-3 name=__codelineno-37-3 href=#__codelineno-37-3></a>        <span class=bp>self</span><span class=o>.</span><span class=n>capture_screenshot</span> <span class=o>=</span> <span class=n>capture_screenshot_callable</span>
</span><span id=__span-37-4><a id=__codelineno-37-4 name=__codelineno-37-4 href=#__codelineno-37-4></a>        <span class=bp>self</span><span class=o>.</span><span class=n>screenshot_queue</span> <span class=o>=</span> <span class=n>queue</span><span class=o>.</span><span class=n>Queue</span><span class=p>(</span><span class=n>maxsize</span><span class=o>=</span><span class=n>max_queue_size</span><span class=p>)</span>
</span><span id=__span-37-5><a id=__codelineno-37-5 name=__codelineno-37-5 href=#__codelineno-37-5></a>        <span class=bp>self</span><span class=o>.</span><span class=n>filtered_queue</span> <span class=o>=</span> <span class=n>queue</span><span class=o>.</span><span class=n>Queue</span><span class=p>(</span><span class=n>maxsize</span><span class=o>=</span><span class=n>max_queue_size</span><span class=p>)</span>
</span><span id=__span-37-6><a id=__codelineno-37-6 name=__codelineno-37-6 href=#__codelineno-37-6></a>        <span class=bp>self</span><span class=o>.</span><span class=n>stop_event</span> <span class=o>=</span> <span class=n>threading</span><span class=o>.</span><span class=n>Event</span><span class=p>()</span>
</span></code></pre></div></p> <h4 id=capture-process>Capture Process<a class=headerlink href=#capture-process title="Permanent link">&para;</a></h4> <p><strong>1. Continuous Capture:</strong> <div class="language-python highlight"><pre><span></span><code><span id=__span-38-1><a id=__codelineno-38-1 name=__codelineno-38-1 href=#__codelineno-38-1></a><span class=k>def</span><span class=w> </span><span class=nf>capture_stream</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>timeout</span><span class=p>):</span>
</span><span id=__span-38-2><a id=__codelineno-38-2 name=__codelineno-38-2 href=#__codelineno-38-2></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;</span>
</span><span id=__span-38-3><a id=__codelineno-38-3 name=__codelineno-38-3 href=#__codelineno-38-3></a><span class=sd>    Continuously captures screenshots in a separate thread.</span>
</span><span id=__span-38-4><a id=__codelineno-38-4 name=__codelineno-38-4 href=#__codelineno-38-4></a>
</span><span id=__span-38-5><a id=__codelineno-38-5 name=__codelineno-38-5 href=#__codelineno-38-5></a><span class=sd>    - Captures at maximum rate</span>
</span><span id=__span-38-6><a id=__codelineno-38-6 name=__codelineno-38-6 href=#__codelineno-38-6></a><span class=sd>    - Stores in screenshot_queue</span>
</span><span id=__span-38-7><a id=__codelineno-38-7 name=__codelineno-38-7 href=#__codelineno-38-7></a><span class=sd>    - Stops on timeout or stop_event</span>
</span><span id=__span-38-8><a id=__codelineno-38-8 name=__codelineno-38-8 href=#__codelineno-38-8></a><span class=sd>    &quot;&quot;&quot;</span>
</span><span id=__span-38-9><a id=__codelineno-38-9 name=__codelineno-38-9 href=#__codelineno-38-9></a>    <span class=n>start_time</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span>
</span><span id=__span-38-10><a id=__codelineno-38-10 name=__codelineno-38-10 href=#__codelineno-38-10></a>    <span class=k>while</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>stop_event</span><span class=o>.</span><span class=n>is_set</span><span class=p>()</span> <span class=ow>and</span> <span class=p>(</span><span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span> <span class=o>-</span> <span class=n>start_time</span><span class=p>)</span> <span class=o>&lt;</span> <span class=n>timeout</span><span class=p>:</span>
</span><span id=__span-38-11><a id=__codelineno-38-11 name=__codelineno-38-11 href=#__codelineno-38-11></a>        <span class=n>frame</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>capture_screenshot</span><span class=p>()</span>
</span><span id=__span-38-12><a id=__codelineno-38-12 name=__codelineno-38-12 href=#__codelineno-38-12></a>        <span class=bp>self</span><span class=o>.</span><span class=n>screenshot_queue</span><span class=o>.</span><span class=n>put</span><span class=p>((</span><span class=n>frame</span><span class=p>,</span> <span class=n>timestamp</span><span class=p>))</span>
</span></code></pre></div></p> <p><strong>2. Deduplication:</strong> <div class="language-python highlight"><pre><span></span><code><span id=__span-39-1><a id=__codelineno-39-1 name=__codelineno-39-1 href=#__codelineno-39-1></a><span class=k>def</span><span class=w> </span><span class=nf>process_screenshot_queue</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span><span id=__span-39-2><a id=__codelineno-39-2 name=__codelineno-39-2 href=#__codelineno-39-2></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;</span>
</span><span id=__span-39-3><a id=__codelineno-39-3 name=__codelineno-39-3 href=#__codelineno-39-3></a><span class=sd>    Processes screenshots with SSIM-based deduplication.</span>
</span><span id=__span-39-4><a id=__codelineno-39-4 name=__codelineno-39-4 href=#__codelineno-39-4></a>
</span><span id=__span-39-5><a id=__codelineno-39-5 name=__codelineno-39-5 href=#__codelineno-39-5></a><span class=sd>    - Compares frames using Structural Similarity Index</span>
</span><span id=__span-39-6><a id=__codelineno-39-6 name=__codelineno-39-6 href=#__codelineno-39-6></a><span class=sd>    - Filters duplicate frames (similarity &gt;= 0.75)</span>
</span><span id=__span-39-7><a id=__codelineno-39-7 name=__codelineno-39-7 href=#__codelineno-39-7></a><span class=sd>    - Stores unique frames in filtered_queue</span>
</span><span id=__span-39-8><a id=__codelineno-39-8 name=__codelineno-39-8 href=#__codelineno-39-8></a><span class=sd>    &quot;&quot;&quot;</span>
</span><span id=__span-39-9><a id=__codelineno-39-9 name=__codelineno-39-9 href=#__codelineno-39-9></a>    <span class=n>similarity</span> <span class=o>=</span> <span class=n>ssim</span><span class=p>(</span><span class=n>gray_last_frame</span><span class=p>,</span> <span class=n>gray_frame</span><span class=p>)</span>
</span><span id=__span-39-10><a id=__codelineno-39-10 name=__codelineno-39-10 href=#__codelineno-39-10></a>    <span class=k>if</span> <span class=n>similarity</span> <span class=o>&gt;=</span> <span class=mf>0.75</span><span class=p>:</span>
</span><span id=__span-39-11><a id=__codelineno-39-11 name=__codelineno-39-11 href=#__codelineno-39-11></a>        <span class=c1># Skip duplicate</span>
</span><span id=__span-39-12><a id=__codelineno-39-12 name=__codelineno-39-12 href=#__codelineno-39-12></a>        <span class=k>return</span> <span class=n>last_processed_frame</span>
</span><span id=__span-39-13><a id=__codelineno-39-13 name=__codelineno-39-13 href=#__codelineno-39-13></a>    <span class=c1># Add to filtered queue</span>
</span></code></pre></div></p> <p><strong>SSIM Deduplication:</strong> - Uses Structural Similarity Index (SSIM) to detect duplicate frames - Threshold: 0.75 (75% similarity = duplicate) - Reduces processing load by filtering similar screenshots - Preserves unique frames for element location</p> <h4 id=usage>Usage<a class=headerlink href=#usage title="Permanent link">&para;</a></h4> <p><strong>Starting Stream:</strong> <div class="language-python highlight"><pre><span></span><code><span id=__span-40-1><a id=__codelineno-40-1 name=__codelineno-40-1 href=#__codelineno-40-1></a><span class=n>stream</span> <span class=o>=</span> <span class=n>ScreenshotStream</span><span class=p>(</span><span class=n>capture_screenshot_callable</span><span class=p>)</span>
</span><span id=__span-40-2><a id=__codelineno-40-2 name=__codelineno-40-2 href=#__codelineno-40-2></a><span class=n>stream</span><span class=o>.</span><span class=n>start_capture</span><span class=p>(</span><span class=n>timeout</span><span class=o>=</span><span class=mi>30</span><span class=p>,</span> <span class=n>deduplication</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span></code></pre></div></p> <p><strong>Getting Screenshots:</strong> <div class="language-python highlight"><pre><span></span><code><span id=__span-41-1><a id=__codelineno-41-1 name=__codelineno-41-1 href=#__codelineno-41-1></a><span class=c1># Get latest screenshot</span>
</span><span id=__span-41-2><a id=__codelineno-41-2 name=__codelineno-41-2 href=#__codelineno-41-2></a><span class=n>frame</span><span class=p>,</span> <span class=n>timestamp</span> <span class=o>=</span> <span class=n>stream</span><span class=o>.</span><span class=n>get_latest_screenshot</span><span class=p>(</span><span class=n>wait_time</span><span class=o>=</span><span class=mi>1</span><span class=p>)</span>
</span><span id=__span-41-3><a id=__codelineno-41-3 name=__codelineno-41-3 href=#__codelineno-41-3></a>
</span><span id=__span-41-4><a id=__codelineno-41-4 name=__codelineno-41-4 href=#__codelineno-41-4></a><span class=c1># Get all available screenshots</span>
</span><span id=__span-41-5><a id=__codelineno-41-5 name=__codelineno-41-5 href=#__codelineno-41-5></a><span class=n>frames</span> <span class=o>=</span> <span class=n>stream</span><span class=o>.</span><span class=n>get_all_available_screenshots</span><span class=p>(</span><span class=n>wait_time</span><span class=o>=</span><span class=mf>0.1</span><span class=p>)</span>
</span><span id=__span-41-6><a id=__codelineno-41-6 name=__codelineno-41-6 href=#__codelineno-41-6></a>
</span><span id=__span-41-7><a id=__codelineno-41-7 name=__codelineno-41-7 href=#__codelineno-41-7></a><span class=c1># Get specific number of frames</span>
</span><span id=__span-41-8><a id=__codelineno-41-8 name=__codelineno-41-8 href=#__codelineno-41-8></a><span class=n>frames</span> <span class=o>=</span> <span class=n>stream</span><span class=o>.</span><span class=n>fetch_frames_from_queue</span><span class=p>(</span><span class=n>num_frames</span><span class=o>=</span><span class=mi>10</span><span class=p>)</span>
</span></code></pre></div></p> <p><strong>Stopping Stream:</strong> <div class="language-python highlight"><pre><span></span><code><span id=__span-42-1><a id=__codelineno-42-1 name=__codelineno-42-1 href=#__codelineno-42-1></a><span class=n>stream</span><span class=o>.</span><span class=n>stop_capture</span><span class=p>(</span><span class=n>wait_for_threads</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>timeout</span><span class=o>=</span><span class=mi>5</span><span class=p>)</span>
</span></code></pre></div></p> <h4 id=thread-management>Thread Management<a class=headerlink href=#thread-management title="Permanent link">&para;</a></h4> <p><strong>Capture Thread:</strong> - Continuously captures screenshots - Non-blocking (daemon thread) - Stops on timeout or stop_event</p> <p><strong>Deduplication Thread:</strong> - Processes screenshots from queue - Applies SSIM deduplication - Stores unique frames in filtered queue - Optional (can be disabled)</p> <p><strong>Cleanup:</strong> <div class="language-python highlight"><pre><span></span><code><span id=__span-43-1><a id=__codelineno-43-1 name=__codelineno-43-1 href=#__codelineno-43-1></a><span class=k>def</span><span class=w> </span><span class=nf>stop_capture</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>wait_for_threads</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>timeout</span><span class=o>=</span><span class=mi>5</span><span class=p>):</span>
</span><span id=__span-43-2><a id=__codelineno-43-2 name=__codelineno-43-2 href=#__codelineno-43-2></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;</span>
</span><span id=__span-43-3><a id=__codelineno-43-3 name=__codelineno-43-3 href=#__codelineno-43-3></a><span class=sd>    Stops capture and waits for threads to finish.</span>
</span><span id=__span-43-4><a id=__codelineno-43-4 name=__codelineno-43-4 href=#__codelineno-43-4></a>
</span><span id=__span-43-5><a id=__codelineno-43-5 name=__codelineno-43-5 href=#__codelineno-43-5></a><span class=sd>    - Sets stop_event</span>
</span><span id=__span-43-6><a id=__codelineno-43-6 name=__codelineno-43-6 href=#__codelineno-43-6></a><span class=sd>    - Waits for threads with timeout</span>
</span><span id=__span-43-7><a id=__codelineno-43-7 name=__codelineno-43-7 href=#__codelineno-43-7></a><span class=sd>    - Logs warnings if threads don&#39;t stop</span>
</span><span id=__span-43-8><a id=__codelineno-43-8 name=__codelineno-43-8 href=#__codelineno-43-8></a><span class=sd>    &quot;&quot;&quot;</span>
</span></code></pre></div></p> <h4 id=queue-management>Queue Management<a class=headerlink href=#queue-management title="Permanent link">&para;</a></h4> <p><strong>Queue Sizes:</strong> - Default max size: 100 frames - Oldest frames dropped when queue is full - Prevents memory issues</p> <p><strong>Queue Operations:</strong> <div class="language-python highlight"><pre><span></span><code><span id=__span-44-1><a id=__codelineno-44-1 name=__codelineno-44-1 href=#__codelineno-44-1></a><span class=c1># Clear queues</span>
</span><span id=__span-44-2><a id=__codelineno-44-2 name=__codelineno-44-2 href=#__codelineno-44-2></a><span class=n>stream</span><span class=o>.</span><span class=n>clear_queues</span><span class=p>()</span>
</span><span id=__span-44-3><a id=__codelineno-44-3 name=__codelineno-44-3 href=#__codelineno-44-3></a>
</span><span id=__span-44-4><a id=__codelineno-44-4 name=__codelineno-44-4 href=#__codelineno-44-4></a><span class=c1># Get queue sizes (debugging)</span>
</span><span id=__span-44-5><a id=__codelineno-44-5 name=__codelineno-44-5 href=#__codelineno-44-5></a><span class=n>sizes</span> <span class=o>=</span> <span class=n>stream</span><span class=o>.</span><span class=n>get_queue_sizes</span><span class=p>()</span>
</span><span id=__span-44-6><a id=__codelineno-44-6 name=__codelineno-44-6 href=#__codelineno-44-6></a><span class=c1># Returns: {&#39;screenshot_queue_size&#39;: 10, &#39;filtered_queue_size&#39;: 5}</span>
</span></code></pre></div></p> <h4 id=performance-considerations>Performance Considerations<a class=headerlink href=#performance-considerations title="Permanent link">&para;</a></h4> <p><strong>Benefits:</strong> - Non-blocking capture (doesn't slow down execution) - Deduplication reduces processing load - Queue-based (decouples capture from consumption)</p> <p><strong>Trade-offs:</strong> - Memory usage (queues store frames) - CPU usage (deduplication computation) - Thread overhead</p> <p><strong>Optimization Tips:</strong> - Adjust <code>max_queue_size</code> based on needs - Disable deduplication if not needed - Use appropriate timeout values - Clear queues between operations</p> <h4 id=use-cases>Use Cases<a class=headerlink href=#use-cases title="Permanent link">&para;</a></h4> <ol> <li><strong>Timeout-Based Location</strong>: Wait for element to appear</li> <li><strong>Screen Change Detection</strong>: Monitor for UI changes</li> <li><strong>Continuous Monitoring</strong>: Track screen state over time</li> <li><strong>Performance Analysis</strong>: Capture frames for analysis</li> </ol> <h4 id=integration-with-strategies>Integration with Strategies<a class=headerlink href=#integration-with-strategies title="Permanent link">&para;</a></h4> <p>Strategies can use screenshot streaming for timeout-based operations:</p> <div class="language-python highlight"><pre><span></span><code><span id=__span-45-1><a id=__codelineno-45-1 name=__codelineno-45-1 href=#__codelineno-45-1></a><span class=c1># In strategy implementation</span>
</span><span id=__span-45-2><a id=__codelineno-45-2 name=__codelineno-45-2 href=#__codelineno-45-2></a><span class=k>def</span><span class=w> </span><span class=nf>locate_with_timeout</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>element</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>timeout</span><span class=p>:</span> <span class=nb>int</span> <span class=o>=</span> <span class=mi>30</span><span class=p>):</span>
</span><span id=__span-45-3><a id=__codelineno-45-3 name=__codelineno-45-3 href=#__codelineno-45-3></a>    <span class=n>stream</span> <span class=o>=</span> <span class=n>ScreenshotStream</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>element_source</span><span class=o>.</span><span class=n>capture</span><span class=p>)</span>
</span><span id=__span-45-4><a id=__codelineno-45-4 name=__codelineno-45-4 href=#__codelineno-45-4></a>    <span class=n>stream</span><span class=o>.</span><span class=n>start_capture</span><span class=p>(</span><span class=n>timeout</span><span class=p>,</span> <span class=n>deduplication</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span><span id=__span-45-5><a id=__codelineno-45-5 name=__codelineno-45-5 href=#__codelineno-45-5></a>
</span><span id=__span-45-6><a id=__codelineno-45-6 name=__codelineno-45-6 href=#__codelineno-45-6></a>    <span class=k>while</span> <span class=kc>True</span><span class=p>:</span>
</span><span id=__span-45-7><a id=__codelineno-45-7 name=__codelineno-45-7 href=#__codelineno-45-7></a>        <span class=n>frame</span><span class=p>,</span> <span class=n>timestamp</span> <span class=o>=</span> <span class=n>stream</span><span class=o>.</span><span class=n>get_latest_screenshot</span><span class=p>()</span>
</span><span id=__span-45-8><a id=__codelineno-45-8 name=__codelineno-45-8 href=#__codelineno-45-8></a>        <span class=k>if</span> <span class=n>frame</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-45-9><a id=__codelineno-45-9 name=__codelineno-45-9 href=#__codelineno-45-9></a>            <span class=k>continue</span>
</span><span id=__span-45-10><a id=__codelineno-45-10 name=__codelineno-45-10 href=#__codelineno-45-10></a>
</span><span id=__span-45-11><a id=__codelineno-45-11 name=__codelineno-45-11 href=#__codelineno-45-11></a>        <span class=c1># Try to locate element in frame</span>
</span><span id=__span-45-12><a id=__codelineno-45-12 name=__codelineno-45-12 href=#__codelineno-45-12></a>        <span class=n>result</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_locate_in_frame</span><span class=p>(</span><span class=n>frame</span><span class=p>,</span> <span class=n>element</span><span class=p>)</span>
</span><span id=__span-45-13><a id=__codelineno-45-13 name=__codelineno-45-13 href=#__codelineno-45-13></a>        <span class=k>if</span> <span class=n>result</span><span class=p>:</span>
</span><span id=__span-45-14><a id=__codelineno-45-14 name=__codelineno-45-14 href=#__codelineno-45-14></a>            <span class=n>stream</span><span class=o>.</span><span class=n>stop_capture</span><span class=p>()</span>
</span><span id=__span-45-15><a id=__codelineno-45-15 name=__codelineno-45-15 href=#__codelineno-45-15></a>            <span class=k>return</span> <span class=n>result</span>
</span><span id=__span-45-16><a id=__codelineno-45-16 name=__codelineno-45-16 href=#__codelineno-45-16></a>
</span><span id=__span-45-17><a id=__codelineno-45-17 name=__codelineno-45-17 href=#__codelineno-45-17></a>        <span class=c1># Check timeout</span>
</span><span id=__span-45-18><a id=__codelineno-45-18 name=__codelineno-45-18 href=#__codelineno-45-18></a>        <span class=k>if</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span> <span class=o>-</span> <span class=n>start_time</span> <span class=o>&gt;</span> <span class=n>timeout</span><span class=p>:</span>
</span><span id=__span-45-19><a id=__codelineno-45-19 name=__codelineno-45-19 href=#__codelineno-45-19></a>            <span class=k>break</span>
</span><span id=__span-45-20><a id=__codelineno-45-20 name=__codelineno-45-20 href=#__codelineno-45-20></a>
</span><span id=__span-45-21><a id=__codelineno-45-21 name=__codelineno-45-21 href=#__codelineno-45-21></a>    <span class=n>stream</span><span class=o>.</span><span class=n>stop_capture</span><span class=p>()</span>
</span><span id=__span-45-22><a id=__codelineno-45-22 name=__codelineno-45-22 href=#__codelineno-45-22></a>    <span class=k>raise</span> <span class=n>ElementNotFoundError</span><span class=p>()</span>
</span></code></pre></div> <h2 id=page-source-strategies>Page Source Strategies<a class=headerlink href=#page-source-strategies title="Permanent link">&para;</a></h2> <h3 id=pagesourcestrategy>PagesourceStrategy<a class=headerlink href=#pagesourcestrategy title="Permanent link">&para;</a></h3> <p>Manages page source extraction from element sources.</p> <h4 id=features_3>Features<a class=headerlink href=#features_3 title="Permanent link">&para;</a></h4> <ul> <li>Page source extraction</li> <li>Interactive element detection</li> <li>Multiple format support (XML, HTML)</li> <li>Element hierarchy navigation</li> </ul> <h2 id=strategy-result-handling>Strategy Result Handling<a class=headerlink href=#strategy-result-handling title="Permanent link">&para;</a></h2> <h3 id=locateresult>LocateResult<a class=headerlink href=#locateresult title="Permanent link">&para;</a></h3> <p>Wraps location results with strategy information:</p> <div class="language-python highlight"><pre><span></span><code><span id=__span-46-1><a id=__codelineno-46-1 name=__codelineno-46-1 href=#__codelineno-46-1></a><span class=k>class</span><span class=w> </span><span class=nc>LocateResult</span><span class=p>:</span>
</span><span id=__span-46-2><a id=__codelineno-46-2 name=__codelineno-46-2 href=#__codelineno-46-2></a>    <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>value</span><span class=p>:</span> <span class=n>Union</span><span class=p>[</span><span class=nb>object</span><span class=p>,</span> <span class=n>Tuple</span><span class=p>[</span><span class=nb>int</span><span class=p>,</span> <span class=nb>int</span><span class=p>]],</span> <span class=n>strategy</span><span class=p>:</span> <span class=n>LocatorStrategy</span><span class=p>):</span>
</span><span id=__span-46-3><a id=__codelineno-46-3 name=__codelineno-46-3 href=#__codelineno-46-3></a>        <span class=bp>self</span><span class=o>.</span><span class=n>value</span> <span class=o>=</span> <span class=n>value</span>  <span class=c1># Coordinates or element object</span>
</span><span id=__span-46-4><a id=__codelineno-46-4 name=__codelineno-46-4 href=#__codelineno-46-4></a>        <span class=bp>self</span><span class=o>.</span><span class=n>strategy</span> <span class=o>=</span> <span class=n>strategy</span>  <span class=c1># Which strategy found it</span>
</span><span id=__span-46-5><a id=__codelineno-46-5 name=__codelineno-46-5 href=#__codelineno-46-5></a>        <span class=bp>self</span><span class=o>.</span><span class=n>is_coordinates</span> <span class=o>=</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>value</span><span class=p>,</span> <span class=nb>tuple</span><span class=p>)</span>
</span></code></pre></div> <h3 id=result-types>Result Types<a class=headerlink href=#result-types title="Permanent link">&para;</a></h3> <ol> <li><strong>Coordinates</strong>: <code>(x, y)</code> tuple for direct coordinate-based actions</li> <li><strong>Element Object</strong>: Element object for driver-specific actions</li> </ol> <h2 id=best-practices_1>Best Practices<a class=headerlink href=#best-practices_1 title="Permanent link">&para;</a></h2> <h3 id=strategy-selection_1>Strategy Selection<a class=headerlink href=#strategy-selection_1 title="Permanent link">&para;</a></h3> <ol> <li><strong>Use XPath when possible</strong>: Fastest and most reliable</li> <li><strong>Fallback to vision</strong>: When UI structure is unknown</li> <li><strong>Configure multiple models</strong>: For maximum resilience</li> <li><strong>Set appropriate timeouts</strong>: For element appearance</li> </ol> <h3 id=performance-optimization>Performance Optimization<a class=headerlink href=#performance-optimization title="Permanent link">&para;</a></h3> <ol> <li><strong>Priority ordering</strong>: Fastest strategies first</li> <li><strong>Caching</strong>: Screenshots may be cached</li> <li><strong>Early exit</strong>: Stop trying when first strategy succeeds</li> <li><strong>Parallel execution</strong>: Multiple strategies can run in parallel</li> </ol> <h3 id=error-handling>Error Handling<a class=headerlink href=#error-handling title="Permanent link">&para;</a></h3> <ol> <li><strong>Graceful degradation</strong>: Try next strategy on failure</li> <li><strong>Error aggregation</strong>: Collect all errors for debugging</li> <li><strong>Screenshot capture</strong>: Save screenshots on failures</li> <li><strong>Detailed logging</strong>: Log strategy attempts and results</li> </ol> <h2 id=extension-guide>Extension Guide<a class=headerlink href=#extension-guide title="Permanent link">&para;</a></h2> <h3 id=adding-a-new-strategy>Adding a New Strategy<a class=headerlink href=#adding-a-new-strategy title="Permanent link">&para;</a></h3> <ol> <li>Create class extending <code>LocatorStrategy</code>:</li> </ol> <div class="language-python highlight"><pre><span></span><code><span id=__span-47-1><a id=__codelineno-47-1 name=__codelineno-47-1 href=#__codelineno-47-1></a><span class=k>class</span><span class=w> </span><span class=nc>CustomStrategy</span><span class=p>(</span><span class=n>LocatorStrategy</span><span class=p>):</span>
</span><span id=__span-47-2><a id=__codelineno-47-2 name=__codelineno-47-2 href=#__codelineno-47-2></a>    <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>element_source</span><span class=p>:</span> <span class=n>ElementSourceInterface</span><span class=p>):</span>
</span><span id=__span-47-3><a id=__codelineno-47-3 name=__codelineno-47-3 href=#__codelineno-47-3></a>        <span class=bp>self</span><span class=o>.</span><span class=n>_element_source</span> <span class=o>=</span> <span class=n>element_source</span>
</span><span id=__span-47-4><a id=__codelineno-47-4 name=__codelineno-47-4 href=#__codelineno-47-4></a>
</span><span id=__span-47-5><a id=__codelineno-47-5 name=__codelineno-47-5 href=#__codelineno-47-5></a>    <span class=k>def</span><span class=w> </span><span class=nf>locate</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>element</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>index</span><span class=p>:</span> <span class=nb>int</span> <span class=o>=</span> <span class=mi>0</span><span class=p>):</span>
</span><span id=__span-47-6><a id=__codelineno-47-6 name=__codelineno-47-6 href=#__codelineno-47-6></a>        <span class=c1># Implementation</span>
</span><span id=__span-47-7><a id=__codelineno-47-7 name=__codelineno-47-7 href=#__codelineno-47-7></a>        <span class=k>pass</span>
</span><span id=__span-47-8><a id=__codelineno-47-8 name=__codelineno-47-8 href=#__codelineno-47-8></a>
</span><span id=__span-47-9><a id=__codelineno-47-9 name=__codelineno-47-9 href=#__codelineno-47-9></a>    <span class=nd>@staticmethod</span>
</span><span id=__span-47-10><a id=__codelineno-47-10 name=__codelineno-47-10 href=#__codelineno-47-10></a>    <span class=k>def</span><span class=w> </span><span class=nf>supports</span><span class=p>(</span><span class=n>element_type</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>element_source</span><span class=p>:</span> <span class=n>ElementSourceInterface</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>bool</span><span class=p>:</span>
</span><span id=__span-47-11><a id=__codelineno-47-11 name=__codelineno-47-11 href=#__codelineno-47-11></a>        <span class=k>return</span> <span class=n>element_type</span> <span class=o>==</span> <span class=s2>&quot;Custom&quot;</span> <span class=ow>and</span> <span class=o>...</span>
</span></code></pre></div> <ol> <li>Register in <code>StrategyFactory</code>:</li> </ol> <div class="language-python highlight"><pre><span></span><code><span id=__span-48-1><a id=__codelineno-48-1 name=__codelineno-48-1 href=#__codelineno-48-1></a><span class=bp>self</span><span class=o>.</span><span class=n>_registry</span> <span class=o>=</span> <span class=p>[</span>
</span><span id=__span-48-2><a id=__codelineno-48-2 name=__codelineno-48-2 href=#__codelineno-48-2></a>    <span class=o>...</span><span class=p>,</span>
</span><span id=__span-48-3><a id=__codelineno-48-3 name=__codelineno-48-3 href=#__codelineno-48-3></a>    <span class=p>(</span><span class=n>CustomStrategy</span><span class=p>,</span> <span class=s2>&quot;Custom&quot;</span><span class=p>,</span> <span class=p>{},</span> <span class=mi>5</span><span class=p>),</span>  <span class=c1># Priority 5</span>
</span><span id=__span-48-4><a id=__codelineno-48-4 name=__codelineno-48-4 href=#__codelineno-48-4></a><span class=p>]</span>
</span></code></pre></div> <ol> <li>Strategy will be automatically used when:</li> <li>Element type matches</li> <li>Element source supports it</li> <li>Higher priority strategies fail</li> </ol> <h2 id=debugging-strategies>Debugging Strategies<a class=headerlink href=#debugging-strategies title="Permanent link">&para;</a></h2> <h3 id=enable-debug-logging>Enable Debug Logging<a class=headerlink href=#enable-debug-logging title="Permanent link">&para;</a></h3> <div class="language-python highlight"><pre><span></span><code><span id=__span-49-1><a id=__codelineno-49-1 name=__codelineno-49-1 href=#__codelineno-49-1></a><span class=kn>import</span><span class=w> </span><span class=nn>logging</span>
</span><span id=__span-49-2><a id=__codelineno-49-2 name=__codelineno-49-2 href=#__codelineno-49-2></a><span class=n>logging</span><span class=o>.</span><span class=n>getLogger</span><span class=p>(</span><span class=s2>&quot;optics_framework.common.strategies&quot;</span><span class=p>)</span><span class=o>.</span><span class=n>setLevel</span><span class=p>(</span><span class=n>logging</span><span class=o>.</span><span class=n>DEBUG</span><span class=p>)</span>
</span></code></pre></div> <h3 id=strategy-execution-log>Strategy Execution Log<a class=headerlink href=#strategy-execution-log title="Permanent link">&para;</a></h3> <p>The framework logs: - Which strategies are tried - Which strategy succeeded - Why strategies failed - Screenshot locations</p> <h3 id=visual-debugging>Visual Debugging<a class=headerlink href=#visual-debugging title="Permanent link">&para;</a></h3> <p>Screenshots are saved with strategy information: - <code>press_element_with_xpath.png</code> - <code>press_element_with_ocr.png</code> - <code>press_element_with_image.png</code></p> <h2 id=related-documentation>Related Documentation<a class=headerlink href=#related-documentation title="Permanent link">&para;</a></h2> <ul> <li><a href=../components/ >Components</a> - Component architecture and Optics class</li> <li><a href=../engines/ >Engines</a> - Engine implementations</li> <li><a href=../execution/ >Execution</a> - Execution flow and test context</li> <li><a href=../error_handling/ >Error Handling</a> - Error codes and handling</li> <li><a href=../logging/ >Logging</a> - Logging system</li> <li><a href=../decisions/ >Architecture Decisions</a> - Strategy pattern rationale</li> <li><a href=../extending/ >Extending</a> - Creating custom strategies</li> <li><a href=./#self-healing-decorator>Self-Healing Decorator</a> - Detailed decorator implementation</li> <li><a href=./#aoi-support>AOI Support</a> - Area of Interest system</li> <li><a href=./#screenshot-streaming>Screenshot Streaming</a> - Continuous screenshot capture</li> </ul> </article> </div> <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg> Back to top </button> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-social> <a href=https://github.com/mozarkai/optics-framework target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"annotate": null, "base": "../..", "features": ["navigation.tabs", "navigation.tabs.sticky", "navigation.sections", "navigation.expand", "navigation.indexes", "navigation.top", "navigation.tracking", "search.suggest", "search.highlight", "search.share", "content.code.annotate", "content.code.copy", "content.tabs.link", "content.tooltips"], "search": "../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script> <script src=../../assets/javascripts/bundle.79ae519e.min.js></script> </body> </html>